---
created: 2023-09-21
number headings: first-level 2, start-at 1, max 6, 1.1-
title: 基础平台1.0资源中心API接口设计
author: 罗潇
cssclass: wideTable
first-level: 1
pdf-filename: 基础平台1.0资源中心API接口设计
platform: true
category: 接口设计
---


 **服务地址URI**
> /api/resource-management/v1

## 1.接口列表

| 序号 | api   | method | desc     |
| ----- | ------ | -------- | -------- |
| 1 | /system-resource | POST   | 新增系统资源 |
| 2 | /system-resource/{resId} | DELETE | 删除系统资源 |
| 3 | /system-resource/{resId} | PUT    | 修改系统资源 |
| 4 | /system-resource/{resId} | GET    | 获取系统资源信息 |
| 5 | /system-resource | GET | 获取系统资源列表 |
| 6 | /system-resource/import | POST    |导入系统资源列表 |
| 7 | /system-resource/export | GET    |导出系统资源列表 |
| 8 | /app-resource | POST   | 新增应用资源 |
| 9 | /app-resource/{resId} | DELETE | 删除应用资源 |
| 10 | /app-resource/{resId} | PUT    | 修改应用资源 |
| 11 | /app-resource/{resId} | GET    | 获取应用资源信息 |
| 12 | /app-resource | GET | 获取应用资源列表 |
| 13 | /app-resource/import | POST    |导入应用资源列表 |
| 14 | /app-resource/export | GET    |导出应用资源列表 |
| 15 | /resource/{resId}/res-type | GET    |查询资源下资源类型 |
| 16 | /resource/{resId}/slave | GET    |查询资源下帐号 |
| 17 | /resource/{resId}/protocol | GET    |查询资源下资源协议 |
| 18 | /business | POST   | 新增资源组 |
| 19 | /business/{businessId} | DELETE | 删除资源组 |
| 20 | /business/{businessId} | PUT    | 修改资源组 |
| 21 | /business/{businessId} | GET    | 获取资源组信息 |
| 22 | /business | GET    | 查询资源组列表 |
| 23 | /business/import | POST    |导入资源组列表 |
| 24 | /business/export | GET    |导出资源组列表 |
| 25 | /business/{businessId}/resource | GET | 查询资源组下资源列表 |
| 26 | /password-policy | POST | 新增资源口令策略 |
| 27 | /password-policy/{policyId} | PUT | 修改资源口令策略 |
| 28 | /password-policy/{policyId} | DELETE | 删除资源口令策略 |
| 29 | /password-policy/{policyId} | GET | 获取资源口令策略信息 |
| 30 | /password-policy | GET | 获取资源口令策略列表 |
| 31 | /slave | POST   | 新增资源帐号 |
| 32 | /slave/{slaveId} | DELETE | 删除资源帐号 |
| 33 | /slave/{slaveId} | PUT    | 修改资源帐号 |
| 34 | /slave/{slaveId} | GET    | 获取资源帐号信息 |
| 35 | /slave | GET | 获取资源帐号列表 |
| 36 | /slave/import | POST    |导入资源帐号列表 |
| 37 | /slave/export | GET    |导出资源帐号列表 |
| 38 | /resource-type/{id} | GET    |查询资源类型 |
| 39 | /resource-type/ | GET    |查询资源类型列表 |
| 40 | /resource-protocol/{id} | GET    |查询资源协议 |
| 41 | /resource-protocol/ | GET    |查询资源协议列表 |
| 42 | /slave/audit-task | POST    |新增核查任务 |
| 43 | /slave/audit-task/{taskId} | PUT    |修改核查任务 |
| 44 | /slave/audit-task/{taskid} | DELETE    |删除核查任务 |
| 45 | /slave/audit-task/{taskid} | GET    |查询核查任务 |
| 46 | /slave/audit-task | GET    |查询核查任务列表 |
| 47 | /ext-attribute | GET | 新增扩展属性 |
| 48 | /ext-attribute/{attrId} | DELETE | 删除扩展属性 |
| 49 | /ext-attribute/{attrId} | PUT | 修改扩展属性 |
| 50 | /ext-attribute/{attrId} | GET | 查询扩展属性 |
| 51 | /ext-attribute | GET | 查询扩展属性列表 |

## 2.资源管理

### 2.1资源接口列表

| 序号 | api   | method | desc     |
| ----- | ------ | -------- | -------- |
| 1 | /system-resource | POST   | 新增系统资源 |
| 2 | /system-resource/{resId} | DELETE | 删除系统资源 |
| 3 | /system-resource/{resId} | PUT    | 修改系统资源 |
| 4 | /system-resource/{resId} | GET    | 获取系统资源信息 |
| 5 | /system-resource | GET | 获取系统资源列表 |
| 6 | /system-resource/import | POST    |导入系统资源列表 |
| 7 | /system-resource/export | GET    |导出系统资源列表 |
| 8 | /app-resource | POST   | 新增应用资源 |
| 9 | /app-resource/{resId} | DELETE | 删除应用资源 |
| 10 | /app-resource/{resId} | PUT    | 修改应用资源 |
| 11 | /app-resource/{resId} | GET    | 获取应用资源信息 |
| 12 | /app-resource | GET | 获取应用资源列表 |
| 13 | /app-resource/import | POST    |导入应用资源列表 |
| 14 | /app-resource/export | GET    |导出应用资源列表 |
| 15 | /resource/{resId}/res-type | GET    |查询资源下资源类型 |
| 16 | /resource/{resId}/slave | GET    |查询资源下帐号 |
| 17 | /resource/{resId}/protocol | GET    |查询资源下资源协议 |

### 2.2资源接口列表说明

#### 2.2.1新增系统资源

##### 功能描述

新增系统资源，为外部调用者调用，此接口为服务端。

##### 调用说明

> `POST` /system-resource

##### 参数说明

| 名称         | 类型   | 位置 | 描述 | 必填项              |
| ------------ | ------ | -------- | ------------------ | ------------------ |
| Accept       | String |header|application/json; charset="UTF-8| 必填 |
| name | String |body|资源名称| 必填 |
| businessId	|String| body | 所属资源组ID |必填|
| typeId	|String| body |	资源类型ID| 必填 |
| ip	|String|body	|资源ip,必须符合ip格式，支持IP4和IP6	|必填|
| protocolInfo	|Array|	body	|	资源协议列表	|必填|
| protocolType	|String|	body	|	资源协议对应类型id	|必填|
|protocolPort	|String|	body	|	资源协议对应端口	|必填|
|pwdPolicyId	|String|	body	|	密码口令策略标识	|必填|
|manageMode	|String|	body	|	管理方式：1：SU；2：SUDO；3：直接登录，默认为3	|必填|
|hostUserId	|String|	body	|	登录帐号	|必填|
|loginAcctPwd	|String|	body	|	登录密码，明文	|必填|
|adminUserd	|String|	body	|	管理帐号	|可空|
|adminAcctPwd	|String|	body	|	管理密码，明文	|可空|
|masterId	|String|	body	|	负责人	|可空|
|description	|String|	body	|	描述信息	|可空|
|content	|Object|	body	|	扩展属性	|可空|

##### 示例

```json
POST /system-resource
{
    "businessId": "2",
    "name": "资源d14rs31",
    "typeId": "2",
    "ip": "172.3.6.9",
    "protocolInfo": [
        {
            "protocolType": "12",
            "protocolPort": "11"
        },
        {
            "protocolType": "2",
            "protocolPort": "11"
        }
    ],
    "manageMode": "1",
    "pwdPolicyId": "1",
    "content": {
        "test_text": "好家夥",
        "test_radio": "male",
        "test_checkbox": "male,female",
        "test_select": "female"
    }
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id": "12d2daa0-89d6-4d3b-b671-49d82ca1c79f",
    "name": "资源d14rs31",
    "typeId": "2",
    "typeName": "UNIX主机",
    "ip": "172.3.6.9",
    "status": "normal",
    "content": {
        "test_text": "好家夥",
        "test_radio": "male",
        "test_checkbox": "male,female",
        "test_select": "female"
    },
    "businessId": "2",
    "businessName": "/业务系统/未分组",
    "resClass": "sysres",
    "manageMode": "1",
    "updateUser": "dasa",
    "updateTime": "2021-03-30 15:04:22",
    "pwdPolicyId": "1",
    "pwdPolicyName": "测试勿删",
    "protocolInfo": [
        {
            "protocolType": "12",
            "protocolName": "RDP",
            "protocolPort": "11"
        },
        {
            "protocolType": "2",
            "protocolName": "HTTPS",
            "protocolPort": "11"
        }
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```
```json
{
	"code": 3,
	"message": "参数不合法",
	"details": [],
}
```

#### 2.2.2删除系统资源

##### 功能描述

删除系统资源。

##### 调用说明

> `DELETE` /system-resource/{resId}

##### 参数说明

| 名称         | 类型   | 位置 | 描述 | 必填项              |
| ------------ | ------ | -------- | ------------------ | ------------------ |
| Accept | String |header|application/json| 必填 |
| resId | String |path|资源ID| 必填 |
##### 示例

```json
DELETE /system-resource/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 2.2.3修改系统资源

##### 功能描述

修改系统资源。

##### 调用说明

> `PUT` /system-resource/{resId}

##### 参数说明

| 名称         | 类型   | 位置 | 描述 | 必填项              |
| ------------ | ------ | -------- | ------------------ | ------------------ |
| Accept       | String |header|application/json; charset="UTF-8| 必填 |
| resId | String |path|资源ID| 必填 |
| id | String |body|资源ID| 必填 |
| name | String |body|资源名称| 必填 |
| businessId	|String| body | 所属资源组ID |必填|
| resTypeId	|String| body |	资源类型ID| 必填 |
| ip	|String|body	|资源ip,必须符合ip格式，支持IP4和IP6	|必填|
| protocolInfo	|Array|	body	|	资源协议列表	|必填|
| protocolType	|String|	body	|	资源协议对应类型id	|必填|
|protocolPort	|String|	body	|	资源协议对应端口	|必填|
|pwdPolicyId	|String|	body	|	密码口令策略标识	|必填|
|manageMode	|String|	body	|	管理方式：1：SU；2：SUDO；3：直接登录，默认为3	|可空|
|hostUserId	|String|	body	|	登录帐号	|可空|
|loginAcctPwd	|String|	body	|	登录密码，明文	|可空|
|adminUserd	|String|	body	|	管理帐号	|可空|
|adminAcctPwd	|Array|	body	|	管理密码，明文	|可空|
|masterId	|String|	body	|	负责人	|可空|
|description	|String|	body	|	描述信息	|可空|
|content	|Object|	body	|	扩展属性	|可空|



##### 示例

```json
PUT /system-resource/1
{
    "id":"ea0f9a76-3b59-43f4-bf1c-fb2ae6c91bb4",
    "businessId": "2",
    "name": "资源d14rs31",
    "typeId": "2",
    "ip": "172.3.6.9",
    "protocolInfo": [
        {
            "protocolType": "12",
            "protocolPort": "11"
        },
        {
            "protocolType": "2",
            "protocolPort": "11"
        }
    ],
    "manageMode": "1",
    "pwdPolicyId": "1",
    "content": {
        "test_text": "好家夥",
        "test_radio": "male",
        "test_checkbox": "male,female",
        "test_select": "female"
    }
}

```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id": "ea0f9a76-3b59-43f4-bf1c-fb2ae6c91bb4",
    "name": "资源d14rs31",
    "typeId": "2",
    "typeName": "UNIX主机",
    "ip": "172.3.6.9",
    "status": "normal",
    "content": {
        "test_text": "好家夥",
        "test_radio": "male",
        "test_checkbox": "male,female",
        "test_select": "female"
    },
    "businessId": "2",
    "businessName": "/业务系统/未分组",
    "resClass": "sysres",
    "manageMode": "1",
    "updateUser": "dasa",
    "updateTime": "2021-03-30 17:28:41",
    "pwdPolicyId": "1",
    "pwdPolicyName": "测试勿删",
    "protocolInfo": [
        {
            "protocolType": "12",
            "protocolName": "RDP",
            "protocolPort": "11"
        },
        {
            "protocolType": "2",
            "protocolName": "HTTPS",
            "protocolPort": "11"
        }
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```
```json
{
	"code": 3,
	"message": "参数不合法",
	"details": [],
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 2.2.4查询系统资源信息

##### 功能描述

查询系统资源信息。

##### 调用说明

> `GET` /system-resource/{resId}

##### 参数说明

| 名称         | 类型   | 位置 | 描述 | 必填项              |
| ------------ | ------ | -------- | ------------------ | ------------------ |
| Accept | String |header|application/json| 必填 |
| resId | String |资源ID|资源ID| 必填 |
##### 示例

```json
GET /system-resource/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "id": "ea0f9a76-3b59-43f4-bf1c-fb2ae6c91bb4",
    "name": "资源d14rs31",
    "typeId": "2",
    "typeName": "UNIX主机",
    "ip": "172.3.6.9",
    "status": "normal",
    "content": {
        "test_text": "好家夥",
        "test_radio": "male",
        "test_checkbox": "male,female",
        "test_select": "female"
    },
    "businessId": "2",
    "businessName": "/业务系统/未分组",
    "resClass": "sysres",
    "manageMode": "1",
    "updateUser": "dasa",
    "updateTime": "2021-03-30 17:28:41",
    "pwdPolicyId": "1",
    "pwdPolicyName": "测试勿删",
    "protocolInfo": [
        {
            "protocolType": "12",
            "protocolName": "RDP",
            "protocolPort": "11"
        },
        {
            "protocolType": "2",
            "protocolName": "HTTPS",
            "protocolPort": "11"
        }
    ]
}
```

**找不到数据**

```ini
Status: 404 Not Found
```
#### 2.2.5查询系统资源列表

##### 功能描述

查询系统资源列表。

##### 调用说明

> `GET` /system-resource/

##### 参数说明

| 名称         | 类型   | 位置 | 描述 | 必填项              |
| ------------ | ------ | -------- | ------------------ | ------------------ |
| Accept       | String |header|application/json; charset="UTF-8| 可空 |
| name | String |query|资源名称| 可空|
| ip	|String|query	|资源ip	|可空|
| typeId	|String|	query	|	资源类型ID	|可空|
|page	|Number|	query	|	当前页，默认0	|可空|
|size	|Number|	query	|	页条数，默认100	|可空|
|**orderBy**	|String|	query	|	filed0,filed1,filde2 多个条件排序逗号分割	|可空|
##### 示例

```curl
GET /system-resource?page=0&size=100&orderBy=email&email=abc@abc.com
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "page": 0,
    "size": 10,
    "orderBy": "updateTime",
    "total": 2,
    "data": [
        {
            "id": "1dd846f4-73d2-4d19-99e1-3003a76bda81",
            "name": "资源d1s31",
            "typeId": "2",
            "typeName": "UNIX主机",
            "ip": "172.3.6.9",
            "status": "normal",
            "content": {
                "test_text": "好家夥",
                "test_radio": "male",
                "test_checkbox": "male,female",
                "test_select": "female"
            },
            "businessId": "2",
            "businessName": "/业务系统/未分组",
            "resClass": "sysres",
            "manageMode": "1",
            "updateUser": "dasa",
            "updateTime": "2021-03-31 13:33:40",
            "pwdPolicyId": "1",
            "pwdPolicyName": "测试勿删",
            "protocolInfo": [
                {
                    "protocolType": "12",
                    "protocolName": "RDP",
                    "protocolPort": "11"
                },
                {
                    "protocolType": "2",
                    "protocolName": "HTTPS",
                    "protocolPort": "11"
                }
            ]
        },
        {
            "id": "ea0f9a76-3b59-43f4-bf1c-fb2ae6c91bb4",
            "name": "资源d14fffrfffs31",
            "typeId": "2",
            "typeName": "UNIX主机",
            "ip": "172.3.6.9",
            "status": "normal",
            "content": {
                "test_text": "好家夥",
                "test_radio": "male",
                "test_checkbox": "male,female",
                "test_select": "female"
            },
            "businessId": "2",
            "businessName": "/业务系统/未分组",
            "resClass": "sysres",
            "manageMode": "1",
            "updateUser": "dasa",
            "updateTime": "2021-03-31 10:28:53",
            "pwdPolicyId": "1",
            "pwdPolicyName": "测试勿删",
            "protocolInfo": [
                {
                    "protocolType": "12",
                    "protocolName": "RDP",
                    "protocolPort": "11"
                },
                {
                    "protocolType": "2",
                    "protocolName": "HTTPS",
                    "protocolPort": "11"
                }
            ]
        }
    ]
}
```
**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```
```json
{
	"code": 3,
	"message": "参数不合法",
	"details": [],
}
```

#### 2.2.6导入系统资源列表

##### 功能描述

导入系统资源列表

##### 调用说明

> `POST` /system-resource/import

##### 参数说明

| 名称   | 类型          | 位置   | 描述                | 必填项 |
| ------ | ------------- | ------ | ------------------- | ------ |
| Accept | String        | header | multipart/form-data | 必填   |
| file   | MultipartFile | body   | 导入文件            | 必填   |

##### 示例

```json
POST /system-resource/import
```

##### 返回

**成功**

```ini
Status: 200 OK
```
**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```
```json
{
	"code": 3,
	"message": "参数不合法",
	"details": [],
}
```
#### 2.2.7导出系统资源列表

##### 功能描述

导出系统资源列表

##### 调用说明

> `GET` /system-resource/export

##### 参数说明

| 名称   | 类型   | 位置   | 描述             | 必填项 |
| ------ | ------ | ------ | ---------------- | ------ |
| Accept | String | header | application/json | 必填   |

##### 示例

```curl
GET /system-resource/export
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```
excel文件
```

#### 2.2.8新增应用资源

##### 功能描述

新增应用资源

##### 调用说明

> `POST` /app-resource

##### 参数说明

| 名称        | 类型   | 位置   | 描述                                 | 必填项 |
| ----------- | ------ | ------ | ------------------------------------ | ------ |
| Accept      | String | header | application/json;charset=UTF-8       | 必填   |
| name        | String | body   | 资源名称                             | 必填   |
| businessId  | String | body   | 所属资源组ID                         | 必填   |
| resTypeId   | String | body   | 资源类型ID                           | 必填   |
| protocoType | String | body   | 应用资源协议类型                     | 必填   |
| protocoUrl  | String | body   | 应用资源协议URL                      | 必填   |
| ip          | String | body   | 资源ip，必须符合ip格式，支持IP4和IP6 | 必填   |
| slaveMode   | String | body   | 帐号来源，master/slave               | 必填   |
| pwdPoliId   | String | body   | 密码口令策略标识                     | 必填   |
| masterId    | String | body   | 负责人                               | 可空   |
| description | String | body   | 描述信息                             | 可空   |
| content     | Object | body   | 扩展属性                             | 可空   |

##### 示例

```json
POST /app-resource
{
    "businessId": "2",
    "name": "应用资源31",
    "typeId": "10",
    "ip": "172.3.6.9",
    "protocolType": "SSH",
    "protocolPort": "http://172.3.6.9",
    "pwdPolicyId": "1",
    "content": {
        "test_text": "好家夥",
        "test_radio": "male",
        "test_checkbox": "male,female",
        "test_select": "female"
    }
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id": "b006b678-fe2c-40a6-9438-85d8548b1b2e",
    "name": "应用资源31",
    "typeId": "10",
    "typeName": "应用资源",
    "ip": "172.3.6.9",
    "status": "normal",
    "content": {
        "test_text": "好家夥",
        "test_radio": "male",
        "test_checkbox": "male,female",
        "test_select": "female"
    },
    "businessId": "2",
    "businessName": "/业务系统/未分组",
    "resClass": "appres",
    "updateUser": "dasa",
    "updateTime": "2021-04-12 16:49:03",
    "pwdPolicyId": "1",
    "pwdPolicyName": "测试勿删",
    "protocolType": "SSH",
    "protocolPort": "http://172.3.6.9",
    "protocolId": "29383"
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": [],
}
```

#### 2.2.9删除应用资源

##### 功能描述

删除应用资源

##### 调用说明

> `DELETE` /app-resource/{resId}

##### 参数说明

| 名称   | 类型   | 位置   | 描述             | 必填项 |
| ------ | ------ | ------ | ---------------- | ------ |
| Accept | String | header | application/json | 必填   |
| resId  | String | path   | 资源ID           | 必填   |

##### 示例

```json
DELETE /app-resource/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 2.2.10修改应用资源

##### 功能描述

修改应用资源

##### 调用说明

> `PUT` /app-resource/{resId}

##### 参数说明

| 名称        | 类型   | 位置   | 描述                                 | 必填项 |
| ----------- | ------ | ------ | ------------------------------------ | ------ |
| Accept      | String | header | application/json;charset=UTF-8       | 必填   |
| resId       | String | path   | 资源id                               | 必填   |
| id          | String | body   | 资源id                               | 必填   |
| name        | String | body   | 资源名称                             | 必填   |
| businessId  | String | body   | 所属资源组ID                         | 必填   |
| resTypeId   | String | body   | 资源类型ID                           | 必填   |
| protocoType | String | body   | 应用资源协议类型                     | 必填   |
| protocoUrl  | String | body   | 应用资源协议URL                      | 必填   |
| ip          | String | body   | 资源ip，必须符合ip格式，支持IP4和IP6 | 必填   |
| slaveMode   | String | body   | 帐号来源，master/slave               | 必填   |
| pwdPoliId   | String | body   | 密码口令策略标识                     | 可空   |
| masterId    | String | body   | 负责人                               | 可空   |
| description | String | body   | 描述信息                             | 可空   |
| content     | Object | body   | 扩展属性                             | 可空   |

##### 示例

```json
PUT /app-resource/1
{
    "id":"1",
    "name":"资源名称",
    "businessId":"所属资源组id",
    "resTypeId":"资源类型id",
    "protocoType":"HTTPS",
    "protocoUrl":"https://172.3.6.9",
    "ip":"172.3.6.9",
    "slaveMode":"slave",
    "content":{
        "key1":"value1",
        "key2":"value2",
        "key3":"value3"
    }
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id":"1",
    "name":"资源名称",
    "businessId":"所属资源组id",
    "resTypeId":"资源类型id",
    "protocoType":"HTTPS",
    "protocoUrl":"https://172.3.6.9",
    "ip":"172.3.6.9",
    "slaveMode":"slave",
    "content":{
        "key1":"value1",
        "key2":"value2",
        "key3":"value3"
    }
}
```

#### 2.2.11查询应用资源信息

##### 功能描述

查询应用资源信息

##### 调用说明

> `GET` /app-resource/{resId}

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| resId  | String | path   | 资源ID                           | 必填   |

##### 示例

```json
GET /app-resource/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "id":"1",
    "name":"资源名称",
    "businessId":"所属资源组id",
    "resTypeId":"资源类型id",
    "protocoType":"HTTPS",
    "protocoUrl":"https://172.3.6.9",
    "ip":"172.3.6.9",
    "slaveMode":"slave",
    "content":{
        "key1":"value1",
        "key2":"value2",
        "key3":"value3"
    }
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 2.2.12查询应用资源列表

##### 功能描述

查询应用资源列表

##### 调用说明

> `GET` /app-resource/

##### 参数说明

| 名称       | 类型   | 位置   | 描述                                      | 必填项 |
| ---------- | ------ | ------ | ----------------------------------------- | ------ |
| Accept     | String | header | application/json;charset=UTF-8            | 可空   |
| resId      | String | query  | 资源id                                    | 可空   |
| name       | String | query  | 资源名称                                  | 可空   |
| businessId | String | query  | 所属资源组ID                              | 可空   |
| resTypeId  | String | query  | 资源类型ID                                | 可空   |
| page       | Number | query  | 当前页，默认0                             | 可空   |
| size       | Number | query  | 页条数，默认100                           | 可空   |
| orderBy    | String | query  | filed0,filed1,filde2 多个条件排序逗号分割 | 可空   |

##### 示例

```curl
GET /app-resource?page=0&size=100&orderBy=ip&name=res1
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "page": 5,
	"size": 100,
	"orderBy": "field1,-field2,field3",
	"total": 110000,
    "data":[
        {
            "id":"1",
   			"name":"资源名称",
    		"businessId":"所属资源组id",
    		"resTypeId":"资源类型id",
    		"protocoType":"HTTPS",
   		 	"protocoUrl":"https://172.3.6.9",
    		"ip":"172.3.6.9",
    		"slaveMode":"slave",
    		"content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
            }
    	}，    
        {
            "id":"1",
   			"name":"资源名称",
    		"businessId":"所属资源组id",
    		"resTypeId":"资源类型id",
    		"protocoType":"HTTPS",
   		 	"protocoUrl":"https://172.3.6.9",
    		"ip":"172.3.6.9",
    		"slaveMode":"slave",
    		"content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
            }
		}
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

#### 2.2.13导入应用资源列表

##### 功能描述

导入应用资源列表

##### 调用说明

> `POST` /app-resource/import

##### 参数说明

| 名称   | 类型          | 位置   | 描述                             | 必填项 |
| ------ | ------------- | ------ | -------------------------------- | ------ |
| Accept | String        | header | multipart/form-data | 必填   |
| file   | MultipartFile | body   | 导入文件            | 必填   |

##### 示例

```curl
POST /app-resource/import
```

##### 返回

**成功**

```ini
Status: 200 OK
```
**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```
```json
{
	"code": 3,
	"message": "参数不合法",
	"details": [],
}
```

#### 2.2.14导出应用资源列表

##### 功能描述

导出应用资源列表

##### 调用说明

> `GET`  /app-resource/export

##### 参数说明

| 名称   | 类型   | 位置   | 描述             | 必填项 |
| ------ | ------ | ------ | ---------------- | ------ |
| Accept | String | header | application/json | 必填   |

##### 示例

```curl
GET /app-resource/export
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```
excel文件
```

#### 2.2.15查询资源下资源类型

##### 功能描述

查询资源下资源类型

##### 调用说明

> `GET` /resource/{resId}/resType

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| resId  | String | path   | 资源ID                           | 必填   |

##### 示例

```curl
GET /resource/1/resType
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "id":"资源类型id",
    "resTypePid":"资源类型父id",
    "resTypeName":"资源类型名称",
    "resTypePath":"资源类型路径"
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 2.2.16查询资源下帐号

##### 功能描述

查询资源下帐号

##### 调用说明

> `GET` /resource/{resId}/slave

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| resId  | String | path   | 资源ID                           | 必填   |

##### 示例

```json
GET /resource/1/slave
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "data":[
        {
            "id":"帐号id",
            "resId":"资源id",
            "acctType":"帐号类型",
            "password":"帐号密码",
            "privilegedAcct":"yes",
            "share":"yes",
            "startTime":"2020-10-22 17:25:52",
            "endTime":"2021-03-04 16:30:26",
            "content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
            }
        },
        {
            "id":"帐号id",
            "resId":"资源id",
            "acctType":"帐号类型",
            "password":"帐号密码",
            "privilegedAcct":"yes",
            "share":"yes",
            "startTime":"2020-10-22 17:25:52",
            "endTime":"2021-03-04 16:30:26",
            "content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
            }
        }
    ]
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 2.2.17查询资源下资源协议

##### 功能描述

查询资源下资源协议

##### 调用说明

> `GET` /resource/{resId}/protocol

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| resId  | String | path   | 资源ID                           | 必填   |

##### 示例

```curl
GET /resource/1/protocol
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "data":[
        {
            "id":"资源协议id",
            "name":"协议名称",
            "description":"协议描述",
            "type":"pc",
            "loginType":"代填登录",
            "status":"on",
            "content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
            }
        },
        {
            "id":"资源协议id",
            "name":"协议名称",
            "description":"协议描述",
            "type":"pc",
            "loginType":"代填登录",
            "status":"on",
            "content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
            }
        }
    ]
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

## 3.资源组管理

### 3.1资源组接口列表

| 序号 | api                             | method | desc                 |
| ---- | ------------------------------- | ------ | -------------------- |
| 1    | /business                       | POST   | 新增资源组           |
| 2    | /business/{businessId}          | DELETE | 删除资源组           |
| 3    | /business/{businessId}          | PUT    | 修改资源组           |
| 4    | /business/{businessId}          | GET    | 查询资源组信息       |
| 5    | /business                       | GET    | 查询资源组列表       |
| 6    | /business/import                | POST   | 导入资源组列表       |
| 7    | /business/export                | GET    | 导出资源组列表       |
| 8    | /business/{businessId}/resource | GET    | 查询资源组下资源列表 |



### 3.2资源组接口列表说明

#### 3.2.1新增资源组

##### 功能描述

新增资源组

##### 调用说明

> `POST` /business

##### 参数说明

| 名称      | 类型   | 位置   | 描述                             | 必填项 |
| --------- | ------ | ------ | -------------------------------- | ------ |
| Accept    | String | header | application/json; charset="UTF-8 | 必填   |
| pId       | String | body   | 上一级资源组id                   | 必填   |
| name      | String | body   | 资源组名称                       | 必填   |
| shortName | String | body   | 资源组简称                       | 必填   |
| content   | Object | body   | 拓展属性字段                     | 可空   |

##### 示例

```json
POST /business
{
    "pid":"上一级资源组id",
    "name":"资源组名称",
    "shortName":"资源组简称",
    "content":{
        "key1":"value1",
   		"key2":"value2",
   		"key3":"value3"
     }
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id": "66ef2c16-fe11-41e2-95c3-843281d01563",
    "updateUser": "admin",
    "updateTime": "2021-03-24 15:27:42",
    "pid": "1",
    "name": "资源组test",
    "namepath": "/业务系统/资源组test",
    "shortName": "资源组简称",
    "content": {
        "key1": "value1",
        "key2": "value2",
        "key3": "value3"
    }
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

#### 3.2.2删除资源组

##### 功能描述

删除资源组

##### 调用说明

> `DELETE` /business/{businessId}

##### 参数说明

| 名称       | 类型   | 位置   | 描述                             | 必填项 |
| ---------- | ------ | ------ | -------------------------------- | ------ |
| Accept     | String | header | application/json; charset="UTF-8 | 必填   |
| businessId | String | path   | 资源组id                         | 必填   |

##### 示例

```json
DELETE /business/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 3.2.3修改资源组

##### 功能描述

新增应用资源

##### 调用说明

> `PUT` /business/{businessId}

##### 参数说明

| 名称       | 类型   | 位置   | 描述                             | 必填项 |
| ---------- | ------ | ------ | -------------------------------- | ------ |
| Accept     | String | header | application/json; charset="UTF-8 | 必填   |
| businessId | String | path   | 资源组id                         | 必填   |
| id         | String | body   | 资源组id                         | 必填   |
| name       | String | body   | 资源组名称                       | 可空   |
| shortName  | String | body   | 资源组简称                       | 可空   |
| content    | Object | body   | 拓展属性                         | 可空   |

##### 示例

```json
PUT /business/1
{
    "id":"8bb99769-73a7-4de0-9fec-9fb374e3b0e0",
    "pid": "1",
    "name": "资源组1tsescdt11",
    "shortName": "资源组简称",
    "content": {
        "key1": "value1"
    }
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id": "8bb99769-73a7-4de0-9fec-9fb374e3b0e0",
    "updateUser": "dasa",
    "updateTime": "2021-03-24 17:42:46",
    "pid": "1",
    "name": "资源组1tsescdt11",
    "namepath": "/业务系统/资源组1tsescdt11",
    "shortName": "资源组简称",
    "content": {
        "key1": "value1"
    }
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 3.2.4查询资源组信息

##### 功能描述

查询资源组信息

##### 调用说明

> `GET` /business/{businessId}

##### 参数说明

| 名称       | 类型   | 位置   | 描述                             | 必填项 |
| ---------- | ------ | ------ | -------------------------------- | ------ |
| Accept     | String | header | application/json; charset="UTF-8 | 必填   |
| businessId | String | path   | 资源组id                         | 必填   |

##### 示例

```json
GET /business/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "id": "2",
    "updateTime": "2020-12-18 15:16:24",
    "pid": "1",
    "name": "未分组",
    "namepath": "/业务系统/未分组",
    "shortName": "未分组",
    "content": {},
    "child": [
        {
            "id": "7a3b9a0c-543b-4b99-abe1-1b8495dcbc40",
            "updateUser": "admin     ",
            "updateTime": "2021-03-24 15:26:50",
            "pid": "2",
            "name": "资源组test1",
            "namepath": "/业务系统/资源组test1",
            "shortName": "资源组简称",
            "content": {
                "key1": "value1"
            }
        }
    ]
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 3.2.5查询资源组列表

##### 功能描述

查询资源组列表

##### 调用说明

> `GET` /business/

##### 参数说明

| 名称         | 类型   | 位置   | 描述                                      | 必填项 |
| ------------ | ------ | ------ | ----------------------------------------- | ------ |
| Accept       | String | header | application/json; charset="UTF-8          | 可空   |
| pId          | String | query  | 上一级资源组id                            | 可空   |
| id           | String | query  | 资源组id                                  | 可空   |
| name         | String | query  | 资源组名称                                | 可空   |
| businessPath | String | query  | 资源组路径                                | 可空   |
| shortName    | String | query  | 资源组简称                                | 可空   |
| type         | String | query  | 系统类型                                  | 可空   |
| page         | Number | query  | 当前页，默认0                             | 可空   |
| size         | Number | query  | 页条数，默认100                           | 可空   |
| orderBy      | String | query  | filed0,filed1,filde2 多个条件排序逗号分割 | 可空   |

##### 示例

```curl
GET /business?page=0&size=100&order=name
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "page": 2,
    "size": 10,
    "orderBy": "updateTime",
    "total": 13,
    "data": [
        {
            "id": "de07a361-e377-4b5d-be9c-1888f387fd99",
            "updateUser": "admin     ",
            "updateTime": "2021-03-23 15:14:42",
            "pid": "1",
            "name": "资源组名称2131",
            "namepath": "/业务系统/资源组名称2131",
            "shortName": "资源组简称",
            "content": {
                "key1": "value1"
            }
        },
        {
            "id": "2",
            "updateTime": "2020-12-18 15:16:24",
            "pid": "1",
            "name": "未分组",
            "namepath": "/业务系统/未分组",
            "shortName": "未分组",
            "content": {}
        },
        {
            "id": "1",
            "updateTime": "2015-02-06 16:53:37",
            "pid": "0",
            "name": "业务系统",
            "namepath": "/业务系统",
            "shortName": "业务系统",
            "content": {}
        }
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

#### 3.2.6导入资源组列表

##### 功能描述

导入资源组列表

##### 调用说明

> `POST`  /business/import

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String        | header | multipart/form-data | 必填   |
| file   | MultipartFile | body   | 导入文件            | 必填   |

##### 示例

```json
POST /business/import
```

##### 返回

**成功**

```ini
Status: 200 OK
```
**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```
```json
{
	"code": 3,
	"message": "参数不合法",
	"details": [],
}
```

#### 3.2.7导出资源组列表

##### 功能描述

导出资源组列表

##### 调用说明

> `GET` /business/export

##### 参数说明

| 名称   | 类型   | 位置   | 描述             | 必填项 |
| ------ | ------ | ------ | ---------------- | ------ |
| Accept | String | header | application/json | 必填   |

##### 示例

```curl
GET /business/export
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```
excel文件
```

#### 3.2.8查询资源组下资源列表

##### 功能描述

查询资源组下资源列表

##### 调用说明

> `GET` /business/{businessId}/resource

##### 参数说明

| 名称       | 类型   | 位置   | 描述                             | 必填项 |
| ---------- | ------ | ------ | -------------------------------- | ------ |
| Accept     | String | header | application/json; charset="UTF-8 | 必填   |
| businessId | String | path   | 资源组id                         | 必填   |

##### 示例

```json
GET /business/1/resource
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
     "data":[
        {
            "id":"1",
   			"name":"资源名称",
    		"businessId":"所属资源组id",
    		"resTypeId":"资源类型id",
    		"protocoType":"HTTPS",
   		 	"protocoUrl":"https://172.3.6.9",
    		"ip":"172.3.6.9",
    		"slaveMode":"slave",
    		"content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
            }
    	}，    
        {
            "id":"2",
   			"name":"资源名称",
    		"businessId":"所属资源组id",
    		"resTypeId":"资源类型id",
    		"protocoType":"HTTPS",
   		 	"protocoUrl":"https://172.3.6.9",
    		"ip":"172.3.6.9",
    		"slaveMode":"slave",
    		"content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
            }
		}
    ]
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

## 4.资源口令策略

### 4.1资源口令策略接口列表

| 序号 | api  | method | desc |
| ---- | ------ | ---- | ---- |
| 1 | /password-policy | POST | 新增资源口令策略 |
| 2 | /password-policy/{policyId} | PUT | 修改资源口令策略 |
| 3 | /password-policy/{policyId} | DELETE | 删除资源口令策略 |
| 4 | /password-policy/{policyId} | GET | 查询资源口令策略信息 |
| 5 | /password-policy | GET | 查询资源口令策略列表 |

### 4.2资源口令策略接口列表说明

#### 4.2.1新增资源口令策略

##### 功能描述

新增口令策略

##### 调用说明

> `POST`  /password-policy

##### 参数说明

| 名称                   | 类型    | 位置   | 描述                             | 必填项 |
| ---------------------- | ------- | ------ | -------------------------------- | ------ |
| Accept                 | String  | header | application/json; charset="UTF-8 | 必填   |
| name                   | String  | body   | 策略名称                         | 必填   |
| min                    | Number  | body   | 最小密码长度                     | 必填   |
| max                    | Number  | body   | 最大密码长度                     | 必填   |
| special                | String  | body   | 特殊字符                         | 可空   |
| requireNumber          | boolean | body   | 必须有数字                       | 可空   |
| requireLowercase       | boolean | body   | 必须有小字母                     | 可空   |
| requireUppercase       | boolean | body   | 必须有大字母                     | 可空   |
| repetitionNumber       | Number  | body   | 密码不得重复次数                 | 可空   |
| passwordValidity       | Number  | body   | 密码有效期（天）                 | 可空   |
| expirationReminderTime | Number  | body   | 到期提醒时间（天）               | 可空   |
| overdueTreatment       | String  | body   | 逾期处理，禁止登录/允许登录      | 可空   |

##### 示例

```json
POST /password-policy
{
    "name":"策略名称",
    "min":"6",
    "max":"8",
    "special":"##%",
    "requireNumber":true,
    "requireLowercase":false,
    "requireUppercase":false,
    "repetitionNumber":2,
    "passwordValidity":10,
    "expirationReminderTime":7,
    "overdueTreatment":"on"
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id":"策略id",
    "name":"策略名称",
    "min":"6",
    "max":"8",
    "special":"##%",
    "requireNumber":true,
    "requireLowercase":false,
    "requireUppercase":false,
    "repetitionNumber":2,
    "passwordValidity":10,
    "expirationReminderTime":7,
    "overdueTreatment":"on"
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

#### 4.2.2删除资源口令策略

##### 功能描述

删除资源口令策略

##### 调用说明

> `DELETE` /password-policy/{policyId}

##### 参数说明

| 名称     | 类型   | 位置   | 描述                             | 必填项 |
| -------- | ------ | ------ | -------------------------------- | ------ |
| Accept   | String | header | application/json; charset="UTF-8 | 必填   |
| policyId | String | path   | 策略id                           | 必填   |

##### 示例

```json
DELETE /password-policy/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 4.2.3修改资源口令策略

##### 功能描述

修改资源口令策略

##### 调用说明

> `PUT`  /password-policy/{policyId}

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| policyId | String | path | 策略id | 必填 |
| name                   | String  | body   | 策略名称                         | 可空 |
| min                    | Number  | body   | 最小密码长度                     | 可空 |
| max                    | Number  | body   | 最大密码长度                     | 可空 |
| special                | String  | body   | 特殊字符                         | 可空   |
| requireNumber          | boolean | body   | 必须有数字                       | 可空   |
| requireLowercase       | boolean | body   | 必须有小字母                     | 可空   |
| requireUppercase       | boolean | body   | 必须有大字母                     | 可空   |
| repetitionNumber       | Number  | body   | 密码不得重复次数                 | 可空   |
| passwordValidity       | Number  | body   | 密码有效期（天）                 | 可空   |
| expirationReminderTime | Number  | body   | 到期提醒时间（天）               | 可空   |
| overdueTreatment       | String  | body   | 逾期处理，禁止登录/允许登录      | 可空   |

##### 示例

```json
PUT /password-policy/1
{
    "id":"策略id",
    "name":"策略名称",
    "min":"6",
    "max":"8",
    "special":"##%",
    "requireNumber":true,
    "requireLowercase":false,
    "requireUppercase":false,
    "repetitionNumber":2,
    "passwordValidity":10,
    "expirationReminderTime":7,
    "overdueTreatment":"on"
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id":"策略id",
    "name":"策略名称",
    "min":"6",
    "max":"8",
    "special":"##%",
    "requireNumber":true,
    "requireLowercase":false,
    "requireUppercase":false,
    "repetitionNumber":2,
    "passwordValidity":10,
    "expirationReminderTime":7,
    "overdueTreatment":"on"
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 4.2.4查询资源口令策略信息

##### 功能描述

查询资源口令策略

##### 调用说明

> `GET` /password-policy/{policyId}

##### 参数说明

| 名称     | 类型   | 位置   | 描述                             | 必填项 |
| -------- | ------ | ------ | -------------------------------- | ------ |
| Accept   | String | header | application/json; charset="UTF-8 | 必填   |
| policyId | String | path   | 策略id                           | 必填   |

##### 示例

```json
GET /password-policy/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "id":"策略id",
    "name":"策略名称",
    "min":"6",
    "max":"8",
    "special":"##%",
    "requireNumber":true,
    "requireLowercase":false,
    "requireUppercase":false,
    "repetitionNumber":2,
    "passwordValidity":10,
    "expirationReminderTime":7,
    "overdueTreatment":"on"
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 4.2.5查询资源口令策略列表

##### 功能描述

查询资源口令策略列表

##### 调用说明

> `GET`  /password-policy

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| name                   | String  | body   | 策略名称                         | 可空 |
| page         | Number | query  | 当前页，默认0                             | 可空   |
| size         | Number | query  | 页条数，默认100                           | 可空   |
| orderBy      | String | query  | filed0,filed1,filde2 多个条件排序逗号分割 | 可空   |

##### 示例

```curl
GET /password-policy?page=0&size=100&orderBy=name
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "page": 5,
	"size": 100,
	"orderBy": "field1,-field2,field3",
	"total": 110000,
    "data":[
        {
            "id":"策略id",
    		"name":"策略名称",
    		"min":"6",
    		"max":"8",
    		"special":"##%",
    		"requireNumber":true,
    		"requireLowercase":false,
    		"requireUppercase":false,
    		"repetitionNumber":2,
    		"passwordValidity":10,
    		"expirationReminderTime":7,
    		"overdueTreatment":"on"
		},
        {
    		"id":"策略id",
    		"name":"策略名称",
    		"min":"6",
    		"max":"8",
    		"special":"##%",
    		"requireNumber":true,
    		"requireLowercase":false,
    		"requireUppercase":false,
    		"repetitionNumber":2,
    		"passwordValidity":10,
    		"expirationReminderTime":7,
    		"overdueTreatment":"on"
		}
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

## 5.资源帐号管理

### 5.1资源帐号接口列表

| 序号 | api              | method | desc             |
| ---- | ---------------- | ------ | ---------------- |
| 1    | /slave           | POST   | 新增资源帐号     |
| 2    | /slave/{slaveId} | DELETE | 删除资源帐号     |
| 3    | /slave/{slaveId} | PUT    | 修改资源帐号     |
| 4    | /slave/{slaveId} | GET    | 查询资源帐号信息 |
| 5    | /slave           | GET    | 查询资源帐号列表 |
| 6    | /slave/import    | POST   | 导入资源帐号列表 |
| 7    | /slave/export    | GET    | 导出资源帐号列表 |

### 5.2资源帐号接口列表说明

#### 5.2.1新增资源账号

##### 功能描述

新增资源帐号

##### 调用说明

> `POST` /slave

##### 参数说明

| 名称              | 类型   | 位置   | 描述                             | 必填项 |
| ----------------- | ------ | ------ | -------------------------------- | ------ |
| Accept            | String | header | application/json; charset="UTF-8 | 必填   |
| resId             | String | body   | 资源id                           | 必填   |
| acctount          | String | body   | 帐号                             | 必填   |
| acctType          | String | body   | 帐号类型                         | 必填   |
| password          | String | body   | 密码                             | 必填   |
| privilegedAccount | String | body   | 是否特权账号                     | 可空   |
| share             | String | body   | 是否共享                         | 可空   |
| startTime         | String | body   | 开始时间(yyyy-MM-dd HH:mm:ss)    | 可空   |
| endTime           | String | body   | 结束时间(yyyy-MM-dd HH:mm:ss)    | 可空   |
| content           | Object | body   | 拓展属性                         | 可空   |

##### 示例

```json
POST /slave
{
    "resId":"资源id",
    "acctType":"帐号类型",
    "password":"帐号密码",
    "privilegedAcct":"yes",
    "share":"yes",
    "startTime":"2020-10-22 17:25:52",
    "endTime":"2021-03-04 16:30:26",
    "content":{
        "key1":"value1",
        "key2":"value2",
        "key3":"value3"
    }
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id":"帐号id",
    "resId":"资源id",
    "acctType":"帐号类型",
    "password":"帐号密码",
    "privilegedAcct":"yes",
    "share":"yes",
    "startTime":"2020-10-22 17:25:52",
    "endTime":"2021-03-04 16:30:26",
    "content":{
        "key1":"value1",
        "key2":"value2",
        "key3":"value3"
    }
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

#### 5.2.2删除资源帐号

##### 功能描述

删除资源帐号

##### 调用说明

> `	DELETE` /slave/{slaveId}

##### 参数说明

| 名称    | 类型   | 位置   | 描述                             | 必填项 |
| ------- | ------ | ------ | -------------------------------- | ------ |
| Accept  | String | header | application/json; charset="UTF-8 | 必填   |
| slaveId | String | path   | 帐号id                           | 必填   |

##### 示例

```json
DELETE /slave/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 5.2.3修改资源账号

##### 功能描述

修改资源帐号

##### 调用说明

> `PUT` /slave/{slaveId}

##### 参数说明

| 名称              | 类型   | 位置   | 描述                             | 必填项 |
| ----------------- | ------ | ------ | -------------------------------- | ------ |
| Accept            | String | header | application/json; charset="UTF-8 | 必填   |
| slaveId           | String | path   | 帐号id                           | 必填   |
| id                | String | body   | 帐号id                           | 可空   |
| acctount          | String | body   | 帐号                             | 可空   |
| acctType          | String | body   | 帐号类型                         | 可空   |
| password          | String | body   | 密码                             | 可空   |
| privilegedAccount | String | body   | 是否特权账号                     | 可空   |
| share             | String | body   | 是否共享                         | 可空   |
| startTime         | String | body   | 开始时间(yyyy-MM-dd HH:mm:ss)    | 可空   |
| endTime           | String | body   | 结束时间(yyyy-MM-dd HH:mm:ss)    | 可空   |
| content           | Object | body   | 拓展属性                         | 可空   |
##### 示例

```json
PUT /slave/1
{
    "id":"帐号id",
    "acctType":"帐号类型",
    "password":"帐号密码",
    "privilegedAcct":"yes",
    "share":"yes",
    "startTime":"2020-10-22 17:25:52",
    "endTime":"2021-03-04 16:30:26",
    "content":{
        "key1":"value1",
        "key2":"value2",
        "key3":"value3"
    }
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id":"帐号id",
    "resId":"资源id",
    "acctType":"帐号类型",
    "password":"帐号密码",
    "privilegedAcct":"yes",
    "share":"yes",
    "startTime":"2020-10-22 17:25:52",
    "endTime":"2021-03-04 16:30:26",
    "content":{
        "key1":"value1",
        "key2":"value2",
        "key3":"value3"
    }
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 5.2.4查询资源帐号信息

##### 功能描述

查询资源帐号信息

##### 调用说明

> `GET` /slave/{slaveId}

##### 参数说明

| 名称    | 类型   | 位置   | 描述                             | 必填项 |
| ------- | ------ | ------ | -------------------------------- | ------ |
| Accept  | String | header | application/json; charset="UTF-8 | 必填   |
| slaveId | String | path   | 帐号id                           | 必填   |

##### 示例

```json
GET /slave/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "id":"帐号id",
    "resId":"资源id",
    "acctType":"帐号类型",
    "password":"帐号密码",
    "privilegedAcct":"yes",
    "share":"yes",
    "startTime":"2020-10-22 17:25:52",
    "endTime":"2021-03-04 16:30:26",
    "content":{
        "key1":"value1",
        "key2":"value2",
        "key3":"value3"
    }
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 5.2.5查询资源帐号列表

##### 功能描述

查询资源帐号列表

##### 调用说明

> `GET` /slave

##### 参数说明

| 名称     | 类型   | 位置   | 描述                                      | 必填项 |
| -------- | ------ | ------ | ----------------------------------------- | ------ |
| Accept   | String | header | application/json; charset="UTF-8          | 必填   |
| id       | String | query  | 帐号id                                    | 可空   |
| acctount | String | query  | 帐号                                      | 可空   |
| acctType | String | query  | 帐号类型                                  | 可空   |
| page     | String | query  | 当前页，默认0                             | 可空   |
| size     | String | query  | 页条数，默认100                           | 可空   |
| orderBy  | String | query  | filed0,filed1,filde2 多个条件排序逗号分割 | 可空   |

##### 示例

```curl
GET /slave?page=0&size=100&orderBy=name
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "page": 5,
	"size": 100,
	"orderBy": "field1,-field2,field3",
	"total": 110000,
    "data":[
        {
            "id":"帐号id",
            "resId":"资源id",
    		"acctType":"帐号类型",
    		"password":"帐号密码",
    		"privilegedAcct":"yes",
    		"share":"yes",
    		"startTime":"2020-10-22 17:25:52",
    		"endTime":"2021-03-04 16:30:26",
    		"content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
            }
    	},{
            "id":"帐号id",
            "resId":"资源id",
    		"acctType":"帐号类型",
    		"password":"帐号密码",
    		"privilegedAcct":"yes",
    		"share":"yes",
    		"startTime":"2020-10-22 17:25:52",
    		"endTime":"2021-03-04 16:30:26",
    		"content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
            }
        }
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

#### 5.2.6导入资源帐号列表

##### 功能描述

导入资源帐号列表

##### 调用说明

> `POST` /slave/import

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String        | header | multipart/form-data | 必填   |
| file   | MultipartFile | body   | 导入文件            | 必填   |

##### 示例

```json
POST /slave/import
```

##### 返回

**成功**

```ini
Status: 200 OK
```
**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```
```json
{
	"code": 3,
	"message": "参数不合法",
	"details": [],
}
```

#### 5.2.7导出资源帐号列表

##### 功能描述

导出资源帐号列表

##### 调用说明

> `GET` /slave/export

##### 参数说明

| 名称   | 类型   | 位置   | 描述             | 必填项 |
| ------ | ------ | ------ | ---------------- | ------ |
| Accept | String | header | application/json | 必填   |

##### 示例

```curl
GET /slave/export
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```
excel文件
```

## 6.资源类型管理

### 6.1资源类型接口列表

| api                 | method | desc             |
| ------------------- | ------ | ---------------- |
| /resource-type/{id} | GET    | 查询资源类型     |
| /resource-type      | GET    | 查询资源类型列表 |

### 6.2资源类型接口列表说明

#### 6.2.1查询资源类型

##### 功能描述

查询资源类型

##### 调用说明

> `GET` /resource-type/{id}

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| id     | String | path   | 资源类型id                       | 必填   |

##### 示例

```curl
GET /resource-type/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "Pid":"资源类型父id",
    "id":"资源类型id",
    "name":"资源类型名称",
    "path":"资源类型路径",
    "content":{
        "key1":"value1",
        "key2":"value2",
        "key3":"value3"
    }
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 6.2.2查询资源类型列表

##### 功能描述

查询资源类型列表

##### 调用说明

> `GET` /resource-type

##### 参数说明

| 名称    | 类型   | 位置   | 描述                                      | 必填项 |
| ------- | ------ | ------ | ----------------------------------------- | ------ |
| Accept  | String | header | application/json; charset="UTF-8          | 可空   |
| id      | String | query  | 资源类型id                                | 可空   |
| pId     | String | query  | 资源类型父id                              | 可空   |
| name    | String | query  | 资源类型名称                              | 可空   |
| path    | String | query  | 资源类型路径                              | 可空   |
| page    | Number | query  | 当前页，默认0                             | 可空   |
| size    | Number | query  | 页条数，默认100                           | 可空   |
| orderBy | String | query  | filed0,filed1,filde2 多个条件排序逗号分割 | 可空   |

##### 示例

```curl
GET /resource-type?page=0&size=100&orderBy=name
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "page": 5,
	"size": 100,
	"orderBy": "field1,-field2,field3",
	"total": 110000,
    "data":[
        {
            "Pid":"资源类型父id",
    		"id":"资源类型id",
    		"name":"资源类型名称",
    		"path":"资源类型路径",
    		"content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
    		} 
        },
        {
            "Pid":"资源类型父id",
    		"id":"资源类型id",
    		"name":"资源类型名称",
    		"path":"资源类型路径",
    		"content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
    		}
        }
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

## 7.资源协议管理

### 7.1资源协议接口列表

| api                     | method | desc             |
| ----------------------- | ------ | ---------------- |
| /resource-protocol/{id} | GET    | 查询资源协议     |
| /resource-protocol      | GET    | 查询资源协议列表 |



### 7.2资源协议接口列表说明

#### 7.2.1查询资源协议

##### 功能描述

查询资源协议

##### 调用说明

> `GET` /resource-protocol/{id}

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| id     | String | path   | 资源协议id                       | 必填   |

##### 示例

```curl
GET /resource-protocol/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "id":"协议id",
    "name":"协议名称",
    "description":"描述",
    "type":"类型",
    "loginType":"本地登录方式",
    "status":"on",
    "content":{
        "key1":"value1",
        "key2":"value2",
        "key3":"value3"
    }
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 7.2.2查询资源协议列表

##### 功能描述

查询资源协议列表

##### 调用说明

> `GET` /resource-protocol

##### 参数说明

| 名称        | 类型   | 位置   | 描述                                      | 必填项 |
| ----------- | ------ | ------ | ----------------------------------------- | ------ |
| Accept      | String | header | application/json; charset="UTF-8          | 可空   |
| id          | String | query  | 协议id                                    | 可空   |
| name        | String | query  | 协议名称                                  | 可空   |
| description | String | query  | 描述                                      | 可空   |
| type        | String | query  | 类型                                      | 可空   |
| loginType   | String | query  | 本地登录方式                              | 可空   |
| status      | String | query  | 是否启用                                  | 可空   |
| page        | Number | query  | 当前页，默认0                             | 可空   |
| size        | Number | query  | 页条数，默认100                           | 可空   |
| orderBy     | String | query  | filed0,filed1,filde2 多个条件排序逗号分割 | 可空   |

##### 示例

```json
GET /resource-protocol?page=0&size=100&orderBy=name
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "page": 5,
	"size": 100,
	"orderBy": "field1,-field2,field3",
	"total": 110000,
    "data":[
        {
            "id":"协议id",
      		"name":"协议名称",
    		"description":"描述",
   			"type":"类型",
    		"loginType":"本地登录方式",
    		"status":"on",
    		"content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
    		}
        },
        {
            "id":"协议id",
      		"name":"协议名称",
    		"description":"描述",
   			"type":"类型",
    		"loginType":"本地登录方式",
    		"status":"on",
    		"content":{
        		"key1":"value1",
        		"key2":"value2",
        		"key3":"value3"
    		}
        }
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

## 8.帐号核查

### 8.1帐号核查接口列表

| api  | method | desc |
| ---- | ------ | ---- |
| /slave/audit-task | POST    |新增核查任务 |
| /slave/audit-task/{taskId} | PUT    |修改核查任务 |
| /slave/audit-task/{taskid} | DELETE    |删除核查任务 |
| /slave/audit-task/{taskid} | GET    |查询核查任务 |
| /slave/audit-task | GET    |查询核查任务列表 |

### 8.2帐号核查接口列表说明

#### 8.2.1新增核查任务

##### 功能描述

新增核查任务

##### 调用说明

> `POST`  /slave/audit-task

##### 参数说明

| 名称           | 类型   | 位置   | 描述                                                         | 必填项 |
| -------------- | ------ | ------ | ------------------------------------------------------------ | ------ |
| Accept         | String | header | application/json; charset="UTF-8                             | 必填   |
| name           | String | body   | 任务名称                                                     | 必填   |
| type           | String | body   | 核查类型，zombie僵尸帐号,abnormal绕行帐号,ghost幽灵帐号,orphan孤儿帐号,normal正常帐号 | 必填   |
| resourceScreen | String | body   | 资源筛选，type资源类型，custom自定义资源，business业务系统   | 必填   |
| resourceValue  | String | body   | 资源筛选对应的id，多个以逗号隔开                             | 必填   |
| mode           | String | body   | 任务模式，定时执行，立即执行，周期执行                       | 必填   |
| modeValue      | String | body   | 任务模式对应的时间                                           | 必填   |

##### 示例

```json
POST /slave/audit-task
{
    "name":"任务名称",
    "type":"normal,ghost",
    "resourceScreen":"type",
    "resourceValue":"1",
    "mode":"1",
    "modeValue":"2021-03-05 14:15:26"
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id":"1",
    "name":"任务名称",
    "type":"normal,ghost",
    "resourceScreen":"type",
    "resourceValue":"1",
    "mode":"1",
    "modeValue":"2021-03-05 14:15:26"
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

#### 8.2.2删除核查任务

##### 功能描述

删除核查任务

##### 调用说明

> `DELETE`  /slave/audit-task/{taskId}

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| taskId | String | path   | 任务id                           | 必填   |

##### 示例

```json
DELETE /slave/audit-task/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 8.2.3修改核查任务

##### 功能描述

修改核查任务

##### 调用说明

> `PUT`  /slave/audit-task/{taskId}

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| taskId | String | path | 任务id | 必填 |
| id | String | body | 任务id | 必填 |
| name           | String | body   | 任务名称                                                     | 可空 |
| type           | String | body   | 核查类型，zombie僵尸帐号,abnormal绕行帐号,ghost幽灵帐号,orphan孤儿帐号,normal正常帐号 | 可空 |
| resourceScreen | String | body   | 资源筛选，type资源类型，custom自定义资源，business业务系统   | 可空 |
| resourceValue  | String | body   | 资源筛选对应的id，多个以逗号隔开                             | 可空 |
| mode           | String | body   | 任务模式，定时执行，立即执行，周期执行                       | 可空 |
| modeValue      | String | body   | 任务模式对应的时间                                           | 可空 |

##### 示例

```json
PUT /slave/audit-task/1
{
    "id":"1",
    "name":"任务名称",
    "type":"normal,ghost",
    "resourceScreen":"type",
    "resourceValue":"1",
    "mode":"1",
    "modeValue":"2021-03-05 14:15:26"
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id":"1",
    "name":"任务名称",
    "type":"normal,ghost",
    "resourceScreen":"type",
    "resourceValue":"1",
    "mode":"1",
    "modeValue":"2021-03-05 14:15:26"
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 8.2.4查询核查任务信息

##### 功能描述

查询核查任务信息

##### 调用说明

> `GET`  /slave/audit-task/{taskId}

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| taskId | String | path   | 任务id                           | 必填   |

##### 示例

```json
GET /slave/audit-task/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "id":"1",
    "name":"任务名称",
    "type":"normal,ghost",
    "resourceScreen":"type",
    "resourceValue":"1",
    "mode":"1",
    "modeValue":"2021-03-05 14:15:26"
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 8.2.5查询核查任务列表

##### 功能描述

查询任务核查列表

##### 调用说明

> `GET` /slave/audit-task

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| name           | String | body   | 任务名称                                                     | 可空 |
| page         | Number | query  | 当前页，默认0                             | 可空   |
| size         | Number | query  | 页条数，默认100                           | 可空   |
| orderBy      | String | query  | filed0,filed1,filde2 多个条件排序逗号分割 | 可空   |

##### 示例

```curl
GET /slave/audit-task?page=0&size=100&orderBy=name
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "page": 5,
	"size": 100,
	"orderBy": "field1,-field2,field3",
	"total": 110000,
    "data":[
        {
            "id":"1",
    		"name":"任务名称",
    		"type":"normal,ghost",
    		"resourceScreen":"type",
    		"resourceValue":"1",
    		"mode":"1",
    		"modeValue":"2021-03-05 14:15:26"
        },    
        {
            "id":"1",
    		"name":"任务名称",
    		"type":"normal,ghost",
    		"resourceScreen":"type",
    		"resourceValue":"1",
    		"mode":"1",
    		"modeValue":"2021-03-05 14:15:26"
        }
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

## 9.扩展属性管理

### 9.1扩展属性接口列表

| api                     | method | desc             |
| ----------------------- | ------ | ---------------- |
| /ext-attribute          | GET    | 新增扩展属性     |
| /ext-attribute/{attrId} | DELETE | 删除扩展属性     |
| /ext-attribute/{attrId} | PUT    | 修改扩展属性     |
| /ext-attribute/{attrId} | GET    | 查询扩展属性     |
| /ext-attribute          | GET    | 查询扩展属性列表 |

### 9.2扩展属性接口列表说明

#### 9.2.1新增扩展属性

##### 功能描述

新增资源、帐号、资源组扩展属性

##### 调用说明

> `POST` /ext-attribute

##### 参数说明

| 名称               | 类型    | 位置   | 描述                                           | 必填项 |
| ------------------ | ------- | ------ | ---------------------------------------------- | ------ |
| Accept             | String  | header | application/json; charset="UTF-8               | 必填   |
| type               | String  | body   | 拓展属性分类，资源res,资源组business,帐号slave | 必填   |
| attributeKey       | String  | body   | 属性key值                                      | 必填   |
| attributeName      | String  | body   | 属性名称                                       | 必填   |
| required           | boolean | body   | 是否必填                                       | 必填   |
| isShow             | boolean | body   | 是否显示                                       | 必填   |
| isModify           | boolean | body   | 是否允许修改                                   | 必填   |
| attributeType      | String  | body   | 属性类型 text,textarea,select,datepicker       | 必填   |
| attributeTypeValue | Array   | body   | 属性类型值                                     | 可空   |

##### 示例

```json
POST /ext-attribute
{
    "type":"slave",
	"attributeKey" :"isDelete",
	"attributeName" :"是否允许删除",
	"required" :true,
	"isShow" :false,
    "isModify":false,
	"attributeType" :"select",
	"attributeTypeValue" : [
        {
            "name":"是",
         	"key":"isDelete_yes"
        },
		{
            "name":"否",
            "key":"isDelete_no"
        }
    ]
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id":"扩展属性id",
    "type":"slave",
	"attributeKey" :"isDelete",
	"attributeName" :"是否允许删除",
	"required" :true,
	"isShow" :false,
    "isModify":false,
	"attributeType" :"select",
	"attributeTypeValue" : [
        {
            "name":"是",
         	"key":"isDelete_yes"
        },
		{
            "name":"否",
            "key":"isDelete_no"
        }
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

#### 9.2.2删除扩展属性

##### 功能描述

删除扩展属性

##### 调用说明

> `DELETE` /ext-attribute/{id}

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| id     | String | path   | 扩展属性id                       | 必填   |

##### 示例

```json
DELETE /ext-attribute/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 9.2.3修改扩展属性

##### 功能描述

修改扩展属性

##### 调用说明

> `PUT` /ext-attribute/{id}

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| id     | String | path | 扩展属性id | 必填 |
| id             | String  | body   | 扩展属性id | 必填 |
| attributeName      | String  | body   | 属性名称                                       | 可空 |
| required           | boolean | body   | 是否必填                                       | 可空 |
| isShow             | boolean | body   | 是否显示                                       | 可空 |
| isModify           | boolean | body   | 是否允许修改                                   | 可空   |
| attributeType      | String  | body   | 属性类型 text,textarea,select,datepicker       | 可空 |
| attributeTypeValue | Array   | body   | 属性类型值                                     | 可空   |

##### 示例

```json
PUT /ext-attribute/1
{
    "id":"扩展属性id",
	"attributeName" :"是否允许删除",
	"required" :true,
	"isShow" :false,
    "isModify":false,
	"attributeType" :"select",
	"attributeTypeValue" : [
        {
            "name":"是",
         	"key":"isDelete_yes"
        },
		{
            "name":"否",
            "key":"isDelete_no"
        }
    ]
}
```

##### 返回

**成功**

```ini
Status: 200
Content-Type: application/json; charset="UTF-8"
```

```json
{
    "id":"扩展属性id",
    "type":"slave",
	"attributeKey" :"isDelete",
	"attributeName" :"是否允许删除",
	"required" :true,
	"isShow" :false,
    "isModify":false,
	"attributeType" :"select",
	"attributeTypeValue" : [
        {
            "name":"是",
         	"key":"isDelete_yes"
        },
		{
            "name":"否",
            "key":"isDelete_no"
        }
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 9.2.4查询扩展属性信息

##### 功能描述

查询扩展属性信息

##### 调用说明

> `GET` /ext-attribute/{id}

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| id     | String | path   | 扩展属性id                       | 必填   |

##### 示例

```json
GET /ext-attribute/1
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "id":"扩展属性id",
    "type":"slave",
	"attributeKey" :"isDelete",
	"attributeName" :"是否允许删除",
	"required" :true,
	"isShow" :false,
    "isModify":false,
	"attributeType" :"select",
	"attributeTypeValue" : [
        {
            "name":"是",
         	"key":"isDelete_yes"
        },
		{
            "name":"否",
            "key":"isDelete_no"
        }
    ]
}
```

**找不到数据**

```ini
Status: 404 Not Found
```

#### 9.2.5查询扩展属性列表

##### 功能描述

查询扩展属性列表

##### 调用说明

> `GET` /ext-attribute

##### 参数说明

| 名称   | 类型   | 位置   | 描述                             | 必填项 |
| ------ | ------ | ------ | -------------------------------- | ------ |
| Accept | String | header | application/json; charset="UTF-8 | 必填   |
| id             | String  | body   | 扩展属性id | 可空 |
| attributeName      | String  | body   | 属性名称                                       | 可空 |
| required           | boolean | body   | 是否必填                                       | 可空 |
| isShow             | boolean | body   | 是否显示                                       | 可空 |
| isModify           | boolean | body   | 是否允许修改                                   | 可空   |
| attributeType      | String  | body   | 属性类型 text,textarea,select,datepicker       | 可空 |
| page         | Number | query  | 当前页，默认0                             | 可空   |
| size         | Number | query  | 页条数，默认100                           | 可空   |
| orderBy      | String | query  | filed0,filed1,filde2 多个条件排序逗号分割 | 可空   |

##### 示例

```curl
GET /ext-attribute?page=0&size=100&orderBy=attributeName
```

##### 返回

**成功**

```ini
Status: 200 OK
```

```json
{
    "page": 5,
	"size": 100,
	"orderBy": "field1,-field2,field3",
	"total": 110000,
    "data":[
        {
    		"id":"扩展属性id",
    		"type":"slave",
			"attributeKey" :"isDelete",
			"attributeName" :"是否允许删除",
			"required" :true,
			"isShow" :false,
    		"isModify":false,
			"attributeType" :"select",
			"attributeTypeValue" : [
        		{
            		"name":"是",
         			"key":"isDelete_yes"
        		},
				{
            		"name":"否",
            		"key":"isDelete_no"
        		}
    		]
		},{
            "id":"扩展属性id",
    		"type":"slave",
			"attributeKey" :"isDelete",
			"attributeName" :"是否允许删除",
			"required" :true,
			"isShow" :false,
    		"isModify":false,
			"attributeType" :"select",
			"attributeTypeValue" : [
        		{
            		"name":"是",
         			"key":"isDelete_yes"
        		},
				{
            		"name":"否",
            		"key":"isDelete_no"
        		}
    		]
        }
    ]
}
```

**参数校验失败**

```ini
Status: 400 Bad Request
Content-Type: application/json; charset="UTF-8"
```

```json
{
	"code": 3,
	"message": "参数不合法",
	"details": []
}
```

