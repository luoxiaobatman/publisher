---
created: 2023-09-21
number headings: first-level 2, start-at 1, max 6, 1.1-
title: 基础平台1.0系统api设计
author: 罗潇
cssclass: wideTable
first-level: 1
pdf-filename: 基础平台1.0系统api设计
platform: true
category: 接口设计
---


## 1.2 系统管理

### 1.2.4 权限管理

#### 接口列表

| 序号 | API 定义                               | 接口功能                                       | 
| ---- | -------------------------------------- | ---------------------------------------------- |
| 1    | GET /system/role                       | 获取角色树                                     |
| 2    | GET /system/role/{id}                  | 获取指定角色树                                 |
| 3    | PUT /system/role                       | 修改角色                                       |
| 4    | POST /system/role                      | 新增角色                                       |
| 5    | DELETE /system/role/{id}               | 删除角色                                       |
| 6    | GET /system/role/permission/group/{id} | 获取角色下功能权限（功能权限：包含多个权限点） |
| 7    | PUT /system/role/permission/group      | 更新角色下功能权限（功能权限：包含多个权限点） |
| 8    | GET /system/role/permission/{id}       | 获取角色下具体权限点                           |
| 9    | PUT /system/role/permission            | 更新角色下具体权限点                           |
| 10   | GET /system/role/permission/data/{id}  | 获取角色下数据权限                             |
| 11   | PUT /system/role/permission/data       | 更新角色下数据权限                             |
| 12   | GET /system/role/user/{id}             | 分页查询角色下用户                             |
| 13   | POST /system/role/user                 | 添加角色下用户                                 |
| 14   | DELETE /system/role/user/{id}          | 移除角色下用户                                 |

#### 接口说明

##### **获取角色树**

**功能描述:**

获取角色树

**调用说明:**

GET /system/role

**参数说明:**

无

**返回值:**

| 返回数据     | 类型   | 说明         |
| ------------ | ------ | ------------ |
| id           | String | 数据id       |
| name         | String | 角色名称     |
| pid          | String | 父角色id     |
| pName        | String | 父角色名     |
| status       | String | 状态         |
| detail       | String | 详情         |
| path         | String | 路径         |
| idPath       | String | Id路径       |
| creatorId    | String | 创建人id     |
| creatorName  | String | 创建人名     |
| creatorCname | String | 创建人中文名 |
| createTime   | String | 创建时间     |
| modifyTime   | String | 修改时间     |

**示例****：**

**响应:**
```json
[{

"id":"1",

"name":"系统管理",

"pid":"root",

"pName":null,

"status":"NORMAL",

"detail":null,

"path":"/系统管理",

"idPath":"/1",

"creatorId":"1",

"creatorName":"admin",

"creatorCname":"系统管理员",

"createTime":"2020-09-16 10:19:34",

"modifyTime":"2020-09-16 10:19:36"}]
```

##### **获取指定角色树**

**功能描述:**

获取角色树

**调用说明:**

GET /system/role/{id}

**参数说明:**

id：要查询的角色 id

**返回值:**

| 返回数据     | 类型   | 说明         | 
| ------------ | ------ | ------------ |
| id           | String | 数据id       |
| name         | String | 角色名称     |
| pid          | String | 父角色id     |
| pName        | String | 父角色名     |
| status       | String | 状态         |
| detail       | String | 详情         |
| path         | String | 路径         |
| idPath       | String | Id路径       |
| creatorId    | String | 创建人id     |
| creatorName  | String | 创建人名     |
| creatorCname | String | 创建人中文名 |
| createTime   | String | 创建时间     |
| modifyTime   | String | 修改时间     |

**示例****：**

**响应:**
```json
[{

"id":"1",

"name":"系统管理",

"pid":"root",

"pName":null,

"status":"NORMAL",

"detail":null,

"path":"/系统管理",

"idPath":"/1",

"creatorId":"1",

"creatorName":"admin",

"creatorCname":"系统管理员",

"createTime":"2020-09-16 10:19:34",

"modifyTime":"2020-09-16 10:19:36"}]
```

##### **新增角色**

**功能描述:**

新增角色

**调用说明:**

POST /system/role

**参数说明:**

| 参数   | 类型   | 说明     | 
| ------ | ------ | -------- |
| name   | String | 角色名称 |
| detail | String | 描述     |
| pid    | String | 父角色id |

**返回值:**

| 返回数据     | 类型   | 说明         |
| ------------ | ------ | ------------ |
| id           | String | 数据id       |
| name         | String | 角色名称     |
| pid          | String | 父角色id     |
| pName        | String | 父角色名     |
| status       | String | 状态         |
| detail       | String | 详情         |
| path         | String | 路径         |
| idPath       | String | Id路径       |
| creatorId    | String | 创建人id     |
| creatorName  | String | 创建人名     |
| creatorCname | String | 创建人中文名 |
| createTime   | String | 创建时间     |
| modifyTime   | String | 修改时间     |

**示例****：**

**请求：**
```json
{

name: "aa",

pid: "1",

detail: "1"

}
```

**响应:**

Status:200
```json
{

"id":"1",

"name":"系统管理",

"pid":"root",

"pName":null,

"status":"NORMAL",

"detail":null,

"path":"/系统管理",

"idPath":"/1",

"creatorId":"1",

"creatorName":"admin",

"creatorCname":"系统管理员",

"createTime":"2020-09-16T10:19:34.000+0800",

"modifyTime":"2020-09-16T10:19:36.000+0800"}
```

##### **修改角色**

**功能描述:**

修改角色

**调用说明:**

PUT /system/role

**参数说明:**

| 参数   | 类型   | 说明     | 
| ------ | ------ | -------- |
| id     | String | 角色 id  |
| name   | String | 角色名称 |
| Id     | String | 角色id   |
| detail | String | 描述     |

**返回值:**

| 返回数据     | 类型   | 说明         |
| ------------ | ------ | ------------ |
| id           | String | 数据id       |
| name         | String | 角色名称     |
| pid          | String | 父角色id     |
| pName        | String | 父角色名     |
| status       | String | 状态         |
| detail       | String | 详情         |
| path         | String | 路径         |
| idPath       | String | Id路径       |
| creatorId    | String | 创建人id     |
| creatorName  | String | 创建人名     |
| creatorCname | String | 创建人中文名 |
| createTime   | String | 创建时间     |
| modifyTime   | String | 修改时间     |

**示例****：**

**请求：**
```json
{

id: "aa"

name: "aa",

detail: "1"

}
```

**响应:**

Status:200

```json
{

"id":"1",

"name":"系统管理",

"pid":"root",

"pName":null,

"status":"NORMAL",

"detail":null,

"path":"/系统管理",

"idPath":"/1",

"creatorId":"1",

"creatorName":"admin",

"creatorCname":"系统管理员",

"createTime":"2020-09-16 10:19:34",

"modifyTime":"2020-09-16T 10:19:36"}
```

##### **删除角色**

**功能描述:**

删除角色

**调用说明:**

DELETE /system/role/{id}

**参数说明:**

id：角色ID

**返回值:**

**示例****：**

**请求：**

DELETE /system/permissions/1

**响应:**

Status:200

##### **获取角色下功能权限**

**功能描述:**

获取角色下功能权限

**调用说明:**

GET /system/role/permission/group/{id}

**参数说明:**

id：角色ID

**返回值:**

| 返回数据 | 类型    | 说明           |
| -------- | ------- | -------------- |
| checked  | Boolean | 是否选中       |
| children | Object  | 子节点         |
| key      | String  | 描述           |
| leaf     | Boolean | 是否为叶子节点 |
| order    | Integer | 序号           |
| pKey     | String  | 父节点key      |
| title    | String  | 名称           |

**示例****：**

**请求：**

**响应:**

Status:200
```json
[{

"title":"首页",

"key":"01",

"pKey":"root",

"checked":false,

"leaf":true,

"order":0,

"children":null}]
```

##### **更新角色下功能权限**

**功能描述:**

更新角色下功能权限

**调用说明:**

PUT /system/role/permission/group

**参数说明:**

| 参数     | 类型   | 说明             | 
| -------- | ------ | ---------------- |
| roleId   | String | 角色ID           |
| groupIds | Array  | 授权的功能权限ID |

**返回值:**

**示例****：**

**请求：**
```json
{"roleId":"4","menuIds":["01"]}
```

**响应:**

Status:200

##### **获取角色下具体权限点**

**功能描述:**

获取角色下具体权限点

**调用说明:**

```json
GET /system/role/permission/{id}
```

**参数说明:**

id：角色ID

**返回值:**

| 返回数据 | 类型    | 说明           | 
| -------- | ------- | -------------- |
| checked  | Boolean | 是否选中       |
| children | Object  | 子节点         |
| key      | String  | 描述           |
| leaf     | Boolean | 是否为叶子节点 |
| order    | Integer | 序号           |
| pKey     | String  | 父节点key      |
| title    | String  | 名称           |

**示例****：**

**请求：**

**响应:**

Status:200
```json
[{

"title":"首页",

"key":"01",

"pKey":"root",

"checked":false,

"leaf":true,

"order":0,

"children":null}]
```

##### **更新角色下具体权限点**

**功能描述:**

更新角色下具体权限点

**调用说明:**

PUT /system/role/permission

**参数说明:**

| 参数     | 类型   | 说明             | 
| -------- | ------ | ---------------- |
| roleId   | String | 角色ID           |
| groupIds | Array  | 授权的具体权限ID |

**返回值:**

**示例****：**

**请求：**

```json
{"roleId":"4","menuIds":["01"]}
```

**响应:Status:200**

##### **获取角色下数据权限**

**功能描述:**

获取角色下数据权限

**调用说明:**

GET /system/role/permission/data/{id}

**参数说明:**

id：角色ID

**返回值:**

| 返回数据 | 类型    | 说明           | 
| -------- | ------- | -------------- |
| checked  | Boolean | 是否选中       |
| children | Object  | 子节点         |
| key      | String  | 描述           |
| leaf     | Boolean | 是否为叶子节点 |
| order    | Integer | 序号           |
| pKey     | String  | 父节点key      |
| title    | String  | 名称           |

**示例****：**

**请求：**

**响应:**

Status:200
```json
[{

"title":"首页",

"key":"01",

"pKey":"root",

"checked":false,

"leaf":true,

"order":0,

"children":null}]
```

##### **更新角色下数据权限**

**功能描述:**

更新角色下数据权限

**调用说明:**

PUT  /system/role/permission/data

**参数说明:**

| 参数        | 类型   | 说明        | 
| ----------- | ------ | ----------- |
| roleId      | String | 角色ID      |
| resGroupIds | Array  | 资源组ID    |
| orgIds      | Array  | 组织机构 ID |

**返回值:**

**示例****：**

**请求：**

```json
{"roleId":"4","menuIds":["01"]}
```

**响应:**

Status:200

##### **分页查询角色下用户**

**功能描述:**

分页查询角色下用户

**调用说明:**

GET /system/role/user/{id}

**参数说明:**

**id：角色ID**

**查询 query 参数：**

| 参数     | 类型    | 说明         | 
| -------- | ------- | ------------ |
| page     | Integer | 页码         |
| size     | Integer | 页大小       |
| username | String  | 用户名，可选 |

**返回值:**

返回数据列表为用户列表，字段参考用户接口

**示例****：**

**请求：**

page=0&size=10&roleId=3&userName=abc

**响应:**

Status:200

```json
{

page: 0,

size: 10,

total: 1000,

data: []

}
```

##### **添加角色下用户**

**功能描述:**

添加角色下用户

**调用说明:**

POST  /system/role/user

**参数说明:**

| 参数    | 类型   | 说明   | 
| ------- | ------ | ------ |
| userIds | Array  | 用户ID |
| roleId  | String | 角色ID |

**返回值:**

返回用户列表，字段参考用户接口

**示例****：**

**请求：**

```json
{"roleId":"3","userIds":["3","5"]}
```

**响应:**

Status:200

[]

##### **移除角色下用户**

**功能描述:**

移除角色下用户

**调用说明:**

DELETE  /system/role/user/{id}

**参数说明:**

| 参数         | 类型   | 说明                 | 
| ------------ | ------ | -------------------- |
| userInRoleId | String | 用户在角色下的关联ID |

**返回值:**

返回用户列表，字段参考用户接口

**示例****：**

**请求：**

**响应:**

Status:200

[]

### 1.2.5 系统配置-网络配置

#### 接口列表

| 序号 | API 定义                           | 接口功能         | 
| ---- | ---------------------------------- | ---------------- |
| 1    | GET /system/network                | 获取所有网卡接口 |
| 2    | GET /system/network/{devName}      | 获取单个网卡接口 |
| 2    | PUT /system/network/ipv4/{devName} | 配置网卡ipv4地址 |
| 3    | PUT /system/network/ipv6/{devName} | 配置网卡ipv6地址 |

#### 接口说明

##### **获取所有网卡接口**

**功能描述:**

获取所有网卡接口

**调用说明:**

GET /system/network

**参数说明:**

无

**返回值:**

| 参数         | 类型    | 说明     | 
| ------------ | ------- | -------- |
| devName      | String  | 网卡     |
| gatewayV4    | String  | ipV4网关 |
| gatewayV6    | String  | ipV6网关 |
| ipV4         | String  | ipV4     |
| ipV6         | String  | ipV6     |
| prefixLength | Integer | 前缀长度 |
| subMaskV4    | String  | 子网掩码 |

**示例****：**

**请求：**

**响应:**

Status:200

```json
[

{

"devName": "ens33",

"ipV4": "172.16.120.109",

"subMaskV4": "255.255.255.0",

"gatewayV4": "172.16.127.254",

"ipV6": "",

"prefixLength": null,

"gatewayV6": ""

}

]
```

##### **获取单个网卡接口**

**功能描述:**

获取单个网卡接口

**调用说明:**

GET /system/network/{devName}

**参数说明:**

**返回值:**

| 参数         | 类型    | 说明     | 
| ------------ | ------- | -------- |
| devName      | String  | 网卡     |
| gatewayV4    | String  | ipV4网关 |
| gatewayV6    | String  | ipV6网关 |
| ipV4         | String  | ipV4     |
| ipV6         | String  | ipV6     |
| prefixLength | Integer | 前缀长度 |
| subMaskV4    | String  | 子网掩码 |

**示例****：**

**请求：**

**响应:**

Status:200

```json
{

"devName": "ens33",

"ipV4": "172.16.120.109",

"subMaskV4": "255.255.255.0",

"gatewayV4": "172.16.127.254",

"ipV6": "",

"prefixfixLength": null,

"gatewayV6": ""

}
```

##### **配置网卡ipv****4**

**功能描述:**

配置网卡ipv4地址，产生配置网络事件

**调用说明:**

PUT /system/network/ipv4/{devName}

**参数说明:**

| 参数      | 类型   | 说明     | 
| --------- | ------ | -------- |
| devName   | String | 网卡     |
| gatewayV4 | String | ipV4网关 |
| ipV4      | String | ipV4     |
| subMaskV4 | String | 子网掩码 |

**返回值:**

**示例****：**

**请求：**

```json
{

"devName": "ens33",

"ipV4": "172.16.120.109",

"subMaskV4": "255.255.255.0",

"gatewayV4": "172.16.127.254"

}
```

**响应:**

Status:200

##### **配置网卡ipv****6**

**功能描述:**

配置网卡ipv6地址，产生配置网络事件

**调用说明:**

PUT /system/network/ipv6/{devName}

**参数说明:**

| 参数         | 类型    | 说明     | 
| ------------ | ------- | -------- |
| devName      | String  | 网卡     |
| gatewayV6    | String  | ipV6网关 |
| ipV6         | String  | ipV6     |
| prefixLength | Integer | 前缀长度 |

**返回值:**

无

**示例****：**

**请求：**

```json
{

"devName": "ens33",

"ipV6": "：：1",

" prefixLength ": 10,

"gatewayV6": "172.16.127.254"

}
```

**响应:**

Status:200

### 1.2.6 系统配置-系统参数配置

#### 接口列表

| 序号 | API 定义               | 接口功能         |
| ---- | ---------------------- | ---------------- |
| 1    | GET /system/plat-param | 获取所有平台参数 |
| 2    | PUT /system/plat-param | 更新平台参数     |

#### 接口说明

##### **获取所有平台参数**

**功能描述:**

获取所有平台参数

**调用说明:**

GET /system/plat-param

**参数说明:**

| 参数   | 类型   | 说明                        | 
| ------ | ------ | --------------------------- |
| name   | String | 参数名称                    |
| type   | String | 参数类型                    |
| status | String | 平台参数状态on正常、off禁用 |

**返回值:**

| 参数     | 类型   | 说明                                                              | 
| -------- | ------ | ----------------------------------------------------------------- |
| name     | String | 参数名称                                                          |
| param    | String | 参数值                                                            |
| type     | String | 参数类型                                                          |
| otpType  | String | 操作类型，radio单选框，checkbox复选框，select下拉选择框，text文本 |
| status   | String | 平台参数状态on正常、off禁用                                       |
| explain  | String | 参数配置说明（直接显示在页面）                                    |
| describe | String | 参数描述                                                          |
| orderBy  | String | 排序优先级顺序                                                    |
| required | String | 是否必填，yes必填，no非必填                                       |
| tabOrder | String | 展示tab优先级排序                                                 |

**示例****：**

**请求：**

```json
{

"type": "login",

}
```

**响应:**

Status:200

```json
[

{

"name": "xxx",

"id": "123",

"param": "kkk",

"type": "login",

"otpType": "radio",

"status": "on",

"explain": "rrrr",

"descirbe": "这个是描述",

"orderBy": "11",

"required": "yes",

"tabOrder": "5"

}

]
```

##### **更新****平台参数**

**功能描述:**

获取所有平台参数

**调用说明:**

PUT /system/plat-param

**参数说明:**

| 参数     | 类型   | 说明                                                              | 
| -------- | ------ | ----------------------------------------------------------------- |
| name     | String | 参数名称                                                          |
| id       | String | Id                                                                |
| param    | String | 参数值                                                            |
| type     | String | 参数类型                                                          |
| otpType  | String | 操作类型，radio单选框，checkbox复选框，select下拉选择框，text文本 |
| status   | String | 平台参数状态on正常、off禁用                                       |
| explain  | String | 参数配置说明（直接显示在页面）                                    |
| describe | String | 参数描述                                                          |
| orderBy  | String | 排序优先级顺序                                                    |
| required | String | 是否必填，yes必填，no非必填                                       |
| tabOrder | String | 展示tab优先级排序                                                 |

**返回值:**

**示例****：**

**请求：**

```json
[{

"name": "xxx",

"id": "123",

"param": "kkk",

"type": "login",

"otpType": "radio",

"status": "on",

"explain": "rrrr",

"descirbe": "这个是描述",

"orderBy": "11",

"required": "yes",

"tabOrder": "5"

}

]
```

**响应:**

Status:200

### 1.2.7 系统配置-主备管理

#### 接口列表

| 序号 | API 定义             | 接口功能         |
| ---- | -------------------- | ---------------- |
| 1    | GET /system/ha/event | 分页查询主备事件 |
| 2    | GET /system/ha       | 获取主备信息     |
| 3    | PUT /system/ha       | 配置主备         |

#### 接口说明

##### **分页查询主备事件**

**功能描述:**

分页查询主备事件

**调用说明:**

GET /system/ha/event

**参数说明:**

| 参数     | 类型    | 说明     | 
| -------- | ------- | -------- |
| page     | Integer | 页码     |
| size     | Integer | 页大小   |
| masterIp | String  | 主机IP   |
| backupIp | String  | 备机IP   |
| content  | String  | 事件内容 |
| roleId   | String  | 角色ID   |

**返回值:**

| 参数     | 类型   | 说明     | 
| -------- | ------ | -------- |
| masterIp | String | 主机IP   |
| backupIp | String | 备机IP   |
| content  | String | 事件内容 |
| time     | String | 时间     |
| status   | String | 状态     |

**示例****：**

**请求：**

page=0&size=10&roleId=3

**响应:**

Status:200

```json
{

page: 0,

size: 10,

total: 1000,

data: [{

"masterIp": "1.1.1.1",

"backupIp": "2.2.2.2",

"content": "a",

"time": "2020-1-1 12：12：00",

"status": " PROCESSED"

}]

}
```

##### **获取主备信息**

**功能描述:**

获取主备信息

**调用说明:**

GET /system/ha

**参数说明:**

无

**返回值:**

| 参数      | 类型   | 说明   | 
| --------- | ------ | ------ |
| ha_status | String | 主机IP |

**示例****：**

**请求：**

page=0&size=10&roleId=3

**响应:**

Status:200

```json
{

"ha_status": "off",

"role": "NONE",

"ha_info": {

"virtual_ip": "",

"virtual_ip_mask": null,

"virtual_router_id": 0,

"check_interval": 0,

"monitor_service_interval": 3,

"pair_cipher": "",

"last_role_change_time": ""

},

"self_dev": {

"ip": "",

"ha_port": 8889,

"online": "true",

"role": "NONE",

"ha_status": "off",

"product_info": "",

"soft_version": "3.0.6.0.3262",

"sync_modules": [],

"interface": ""

},

"other_dev": {

"ip": "",

"ha_port": 0,

"online": "false",

"role": "NONE",

"ha_status": "off",

"product_info": "",

"soft_version": "",

"sync_modules": [],

"interface": ""

}

}
```

##### **配置主备**

**功能描述:**

配置主备，产生配置主备事件

**调用说明:**

PUT /system/ha

**参数说明:**

**返回值:**

无

**示例****：**

**请求：**

```json
{

"status": "ON",

"role": "MASTER",

"selfDevInterface": "ens37",

"virtualRouterId": 22,

"virtualIp": "172.16.98.149",

"virtualIpMask": 19,

"selfIp": "172.16.98.142"

}
```

**响应:**

Status:200

### 1.2.8 系统配置-配置备份

#### 接口列表

| 序号 | API 定义                         | 接口功能                  |
| ---- | -------------------------------- | ------------------------- |
| 1    | GET /system/backup               | 分页查询配置备份列表      |
| 2    | POST /system/backup              | 手动配置备份              |
| 3    | POST /system/backup/upload       | 导入配置备份文件          |
| 4    | DELETE /system/backup/{id}       | 删除备份                  |
| 5    | GET /system/backup/download/{id} | 下载备份                  |
| 6    | POST /system/backup/restore/{id} | 恢复到指定的备份          |
| 7    | PUT /system/backup/ftp-server    | 保存配置备份FTP服务器信息 |

#### 接口说明

##### **分页查询配置备份列表**

**功能描述:**

分页查询配置备份

**调用说明:**

GET /system/backup

**参数说明:**

| 参数      | 类型    | 说明                   | 
| --------- | ------- | ---------------------- |
| page      | Integer | 页码                   |
| size      | Integer | 页大小                 |
| time      | String  | 备份时间               |
| version   | String  | 备份版本号             |
| startTime | String  | 备份时间大于的开始时间 |
| endTime   | String  | 备份时间小于的结束时间 |

**返回值:**

| 参数       | 类型   | 说明         | 
| ---------- | ------ | ------------ |
| path       | String | 主机文件路径 |
| size       | String | 备机文件大小 |
| id         | String | 备份id       |
| backupTime | String | 备份时间     |
| version    | String | 备份版本号   |

**示例****：**

**请求：**

page=0&size=10&version=”3.0.4.3.19318”

**响应:**

Status:200

```json
{

page: 0,

size: 10,

total: 1000,

data: [{

            "path":"/data/backup/4a_db_backup/cfb/20210311/4a_20210311154632146.dbk",

            "size":"917KB",

            "id":"54863",

            "backuptime":"2021-03-11 15:46:44",

            "version":"3.0.4.3.19318"

        }]

}
```

##### **手动配置备份**

**功能描述:**

手动配置备份,产生手动配置备份事件，备份数据库文件、视图

**调用说明:**

POST /system/backup

**参数说明:**

无

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

##### **导入配置备份**

**功能描述:**

导入配置备份文件，产生配置备份事件

**调用说明:**

POST /system/backup/upload

**参数说明:**

| 参数 | 类型 | 说明     | 
| ---- | ---- | -------- |
| file | File | 备份文件 |

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

##### **删除备份**

**功能描述:**

删除备份

**调用说明:**

DELETE /system/backup/{id}

**参数说明:**

备份ID

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

##### **下载备份**

**功能描述:**

下载备份

**调用说明:**

GET /system/backup/download/{id}

**参数说明:**

备份ID

**返回值:**

下载的文件

**示例****：**

**请求：**

**响应:**

Status:200

##### **恢复到指定的备份**

**功能描述:**

恢复到指定的备份,产生恢复到指定备份事件。

**调用说明:**

POST /system/backup/restore/{id}

**参数说明:**

备份ID

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

##### **保存配置备份F****TP****服务器信息**

**功能描述:**

保存配置备份FTP服务器信息

**调用说明:**

PUT /system/backup/ftp-server

**参数说明:**

| 参数     | 类型    | 说明    | 
| -------- | ------- | ------- |
| ip       | String  | FTP地址 |
| port     | Integer | FTP端口 |
| username | String  | 用户名  |
| password | String  | 密码    |
| path     | String  | 路径    |

**返回值:**

无

**示例****：**

**请求：**

```json
{

"ip": "1.1.1.1",

"port": "21",

"username": "aaa",

"password": "das",

"path": "/"

}
```

**响应:**

Status:200

### 1.2.9 系统配置-公告管理

#### 接口列表

| 序号 | API 定义                   | 接口功能         |
| ---- | -------------------------- | ---------------- |
| 1    | GET /system/notice         | 分页查询系统公告 |
| 2    | GET /system/notice/{id}    | 查询单个公告     |
| 2    | POST /system/notice        | 新增公告         |
| 4    | PUT /system/notice/{id}    | 修改公告         |
| 5    | DELETE /system/notice/{id} | 删除公告         |

#### 接口说明

##### **分页查询系统公告**

**功能描述:**

分页查询系统公告

**调用说明:**

GET /system/notice

**参数说明:**

| 参数    | 类型    | 说明   | 
| ------- | ------- | ------ |
| page    | Integer | 页码   |
| size    | Integer | 页大小 |
| title   | String  | 标题   |
| creater | String  | 创建人 |

**返回值:**

公告数据

**示例****：**

**请求：**

page=0&size=10&roleId=3

**响应:**

Status:200

```json
{

page: 0,

size: 10,

total: 1000,

data: [{

"id": "51244",

"names": "a",

"content": "b",

"createtime": "2021-03-03 14:52:50",

"begintime": "2019-12-04 16:36:00",

"endtime": "2029-12-11 16:36:00",

"filepath": null,

"creater": "admin",

"emergency": "true",

"hasfile": "0"

}]

}
```

##### **查询单个公告**

**功能描述:**

查询单个公告详情

**调用说明:**

GET /system/notice/{id}

**参数说明:**

**公告id**

**返回值:**

公告数据

**示例****：**

**请求：**

**响应:**

Status:200

```json
{

    "id":"51244",

    "title":"a",

    "content":"b",

    "createtime":"2021-03-03 14:52:50",

    "begintime":"2019-12-04 16:36:00",

    "endtime":"2029-12-11 16:36:00",

    "filepath":null,

    "creater":"admin",

    "emergency":"true",

    "hasfile":"0"

}
```

##### **新增公告**

**功能描述:**

新增公告

**调用说明:**

POST /system/notice

**参数说明:**

| 参数      | 类型    | 说明     | 
| --------- | ------- | -------- |
| title     | String  | 标题     |
| content   | String  | 内容     |
| beginTime | String  | 开始时间 |
| endTime   | String  | 结束时间 |
| file      | File    | 文件     |
| emergency | Boolean | 是否紧急 |

**返回值:**

无

**示例****：**

**请求：**
```json
{

"title": "a",

"content": "b",

"begintime":"2019-12-04 22:22:22",

"emergency": true,

"endtime":"2029-12-11 21:21:21"

}
```

**响应:**

Status:200

##### **修改公告**

**功能描述:**

修改公告

**调用说明:**

PUT /system/notice/{id}

**参数说明:**

| 参数      | 类型    | 说明     | 
| --------- | ------- | -------- |
| id        | String  | id       |
| title     | String  | 标题     |
| content   | String  | 内容     |
| beginTime | String  | 开始时间 |
| endTime   | String  | 结束时间 |
| file      | File    | 文件     |
| emergency | Boolean | 是否紧急 |

**返回值:**

无

**示例****：**

**请求：**

```json
{

"id": "51244",

"title": "a",

"content": "b",

"begintime": "2021-03-03 14:52:50",

"endtime": "2029-12-11 16:36:00",

"emergency": "true"

}
```

**响应:**

Status:200

##### **删除公告**

**功能描述:**

删除公告

**调用说明:**

DELETE /system/notice/{id}

**参数说明:**

公告ID

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

### 1.2.10 系统配置-时间配置

#### 接口列表

| 序号 | API 定义                   | 接口功能         |
| ---- | -------------------------- | ---------------- |
| 1    | GET /system/time-zone/list | 获取系统支持时区 |
| 1    | GET /system/time           | 获取系统时间     |
| 2    | PUT /system/time           | 修改系统时间     |
| 3    | GET /system/time/ntp       | 获取ntp同步信息  |
| 4    | PUT /system/time/ntp       | 配置ntp同步      |

#### 接口说明

##### **获取系统支持时区**

**功能描述:**

获取系统支持时区

**调用说明:**

GET /system/time-zone/list

**参数说明:**

无

**返回值:**

| 参数         | 类型 | 说明         | 
| ------------ | ---- | ------------ |
| timeZoneList | List | 系统支持时区 |

**示例****：**

**请求：**

**响应:**

Status:200
```json
{
    “timeZoneList”:[“America/Adak”，“Asia/Shanghai”]
}
```

##### **获取系统时间**

**功能描述:**

获取系统时间

**调用说明:**

GET /system/time

**参数说明:**

无

**返回值:**

| 参数     | 类型   | 说明 |
| -------- | ------ | ---- |
| time     | String | 时间 |
| timeZone | String | 时区 |

**示例****：**

**请求：**

**响应:**

Status:200

```json
{time: "2020-12-11 11:11:22", timeZone: "Asia/Shanghai"}
```

##### **修改系统时间**

**功能描述:**

修改系统时间，产生修改系统时间事件

**调用说明:**

PUT /system/time

**参数说明:**

| 参数     | 类型   | 说明 | 
| -------- | ------ | ---- |
| time     | String | 时间 |
| timeZone | String | 时区 |

**返回值:**

无

**示例****：**

**请求：**

{time: "2020-12-11 11:11:22", timeZone: "Asia/Shanghai"}

**响应:**

Status:200

##### **获取ntp同步信息**

**功能描述:**

获取ntp同步信息

**调用说明:**

GET /system/time/ntp

**参数说明:**

无

**返回值:**

| 参数         | 类型   | 说明         | 
| ------------ | ------ | ------------ |
| syncStatus   | String | 同步状态     |
| ntpServer    | String | Ntp服务器    |
| nextSyncTime | String | 下次同步时间 |

**示例****：**

**请求：**

**响应:**

Status:200

```json
{ nextSyncTime: "2020-01-22 12:11:00", ntpServer: "ntp.cn"，"syncStatus"："on"}
```

##### **配置ntp同步**

**功能描述:**

配置ntp同步，产生修改系统时间事件

**调用说明:**

PUT /system/time/ntp

**参数说明:**

| 参数       | 类型   | 说明      | 
| ---------- | ------ | --------- |
| syncStatus | String | 同步状态  |
| ntpServer  | String | Ntp服务器 |

**返回值:**

无

**示例****：**

**请求：**

```json
{

 "ntpServer": "ntp.cn"，

"syncStatus"："on"

}
```

**响应:**

Status:200

### 1.2.11 系统配置-电源管理

#### 接口列表

| 序号 | API 定义                    | 接口功能   |
| ---- | --------------------------- | ---------- |
| 1    | POST /system/power/shutdown | 关闭服务器 |
| 2    | POST /system/power/reboot   | 重启服务器 |

#### 接口说明

##### **关闭服务器**

**功能描述:**

关闭服务器，产生关闭系统事件

**调用说明:**

POST /system/power/shutdown

**参数说明:**

无

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

##### **重启服务器**

**功能描述:**

重启服务器，产生系统重启事件

**调用说明:**

POST /system/power/reboot

**参数说明:**

无

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

### 1.2.12 平台页面配置

#### 接口列表

| 序号 | API 定义              | 接口功能     |
| ---- | --------------------- | ------------ |
| 1    | GET /system/page-meta | 获取页面配置 |
| 2    | PUT /system/page-meta | 修改页面配置 |

#### 接口说明

##### **获取页面配置**

**功能描述:**

获取页面配置

**调用说明:**

GET /system/page-meta

**参数说明:**

无

**返回值:**

| 参数           | 类型   | 说明             |
| -------------- | ------ | ---------------- |
| bgImgMode      | String | 背景图模式       |
| bgImgHPosition | String | 背景图片水平位置 |
| bgImgVPosition | String | 背景图片垂直位置 |
| platformName   | String | 平台名           |
| companyName    | String | 公司名           |
| platFormEnName | String | 平台英文名       |
| companyEnName  | String | 公司英文名       |

**示例****：**

**请求：**

**响应:**

Status:200

```json
{

"bgImgMode": "normal",

"bgImgHPosition": "left"，

"bgImgVPosition"："top",

"platformName": "4A",

"companyName": "venus",

"platFormEnName ": "4A",

"companyEnName ": "venus"

}
```

##### **修改页面配置**

**功能描述:**

修改页面配置

**调用说明:**

PUT /system/page-meta

**参数说明:**

| 参数           | 类型   | 说明             | 
| -------------- | ------ | ---------------- |
| bgImgMode      | String | 背景图模式       |
| bgImgHPosition | String | 背景图片水平位置 |
| bgImgVPosition | String | 背景图片垂直位置 |
| platformName   | String | 平台名           |
| companyName    | String | 公司名           |
| platFormEnName | String | 平台英文名       |
| companyEnName  | String | 公司英文名       |
| icoFile        | File   | ico图标          |
| logoFile       | File   | logo图片         |
| bgImgFile      | File   | 背景图片         |

**返回值:**

无

**示例****：**

**请求：**
```json
{

"bgImgMode": "normal",

"bgImgHPosition": "left"，

"bgImgVPosition"："top",

"platformName": "4A",

"companyName": "venus",

"platFormEnName ": "4A",

"companyEnName ": "venus"

}
```

**响应:**

Status:200

### 1.2.13 系统配置-HTTPS配置

#### 接口列表

| 序号 | API 定义                  | 接口功能             |
| ---- | ------------------------- | -------------------- |
| 1    | PUT /system/https         | 保存证书IP或域名配置 |
| 2    | PUT /system/https/restore | 还原初始配置         |
| 3    | POST /system/https/cert   | 重新生成证书         |

#### 接口说明

##### **保存证书I****P****或域名配置**

**功能描述:**

保存证书IP或域名配置

**调用说明:**

PUT /system/https

**参数说明:**

| 参数 | 类型  | 说明             | 
| ---- | ----- | ---------------- |
| host | Array | 证书扩展IP或域名 |

**返回值:**

无

**示例****：**

**请求：**

```
{ host:[ "172.16.122.100"]}
```

**响应:**

Status:200

##### **还原初始配置**

**功能描述:**

还原初始配置

**调用说明:**

PUT /system/https/restore

**参数说明:**

无

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

##### **重新生成证书**

**功能描述:**

重新生成证书

**调用说明:**

POST /system/https/cert

**参数说明:**

| 参数 | 类型  | 说明             |
| ---- | ----- | ---------------- |
| host | Array | 证书扩展IP或域名 |

**返回值:**

无

**示例****：**

**请求：**

```
{ host:[ "172.16.122.100"]}
```

**响应:**

Status:200

### 1.2.14 系统信息-在线用户列表

#### 接口列表

| 序号 | API 定义                | 接口功能         |
| ---- | ----------------------- | ---------------- |
| 1    | GET /system/online-user | 分页查询在线用户 |

#### 接口说明

##### **分页查询在线用户**

**功能描述:**

分页查询在线用户

**调用说明:**

GET /system/online-user

**参数说明:**

| 参数     | 类型    | 说明   | 
| -------- | ------- | ------ |
| page     | Integer | 页码   |
| size     | Integer | 页大小 |
| userName | String  | 用户名 |
| ip       | String  | 登录IP |

**返回值:**

| 参数      | 类型   | 说明     | 
| --------- | ------ | -------- |
| Id        | String | 用户ID   |
| orgName   | String | 组织名   |
| userName  | String | 用户名   |
| loginIp   | String | 登录IP   |
| loginTime | String | 登录时间 |

**示例****：**

**请求：**

page=0&size=10&userName=3

**响应:**

Status:Status:200

```json
{

page: 0,

size: 10,

total: 1000,

data: [{

"id": "49966",

" orgName ": "1",

" userName ": "2",

" loginIp ": "21.1.1.1",

" loginTime ": "2020-12-11 11:11:22"

}]

}
```

### 1.2.15 系统信息-系统组件管理

#### 接口列表

| 序号 | API 定义                                | 接口功能         |
| ---- | --------------------------------------- | ---------------- |
| 1    | GET /system/component                   | 获取系统组件信息 |
| 2    | POST /system/component/stop/{id}        | 停止组件         |
| 3    | POST /system/component/start/{id}       | 启动组件         |
| 4    | PUT /system/component/alert-reciver     | 更新告警接收人   |
| 5    | GET /system/component/log/download/{id} | 下载日志文件     |
| 6    | GET /system/component/log/{id}          | 组件日志详情查看 |
| 7    | DELETE /system/component/{id}           | 删除组件         |

#### 接口说明

##### **获取系统组件信息**

**功能描述:**

获取系统组件信息

**调用说明:**

GET /system/component

**参数说明:**

无

**返回值:**

| 参数          | 类型   | 说明             | 
| ------------- | ------ | ---------------- |
| name          | String | 组件名           |
| id            | String | 组件ID           |
| ip            | String | IP               |
| lastStartTime | String | 最后一次启动时间 |
| lastStopTime  | String | 最后一次停止时间 |
| status        | String | 状态             |

**示例****：**

**请求：**

**响应:**

Status:200

```json
{

"name": "49966",

"status": "on",

"ip ": "21.1.1.1",

"lastStartTime": "2020-12-11 11:11:22",

"lastStopTime": "2020 - 12 - 11 11: 11: 22"

}
```

##### **停止组件**

**功能描述:**

停止组件,产生组件停止事件

**调用说明:**

POST /system/component/stop/{id}

**参数说明:**

组件ID

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

##### **启动组件**

**功能描述:**

启动组件，产生组件启动事件

**调用说明:**

POST /system/component/start/{id}

**参数说明:**

组件ID

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

##### **更新告警接收人**

**功能描述:**

更新告警接收人

**调用说明:**

PUT /system/component/alert-reciver

**参数说明:**

| 参数         | 类型   | 说明       | 
| ------------ | ------ | ---------- |
| reciverEmail | String | 接收人邮箱 |

**返回值:**

**示例****：**

**请求：**

```json
{ "reciverEmail" : "12@1.com"}
```

**响应:**

Status:200

##### **下载日志文件**

**功能描述:**

下载日志文件

**调用说明:**

GET /system/component/log/download/{id}

**参数说明:**

组件ID

**返回值:**

日志文件

**示例****：**

**请求：**

**响应:**

Status:200

##### **组件日志详情查看**

**功能描述:**

下载日志文件

**调用说明:**

GET /system/component/log/{id}

**参数说明:**

组件ID

**返回值:**

日志文件

**示例****：**

**请求：**

**响应:**

Status:200

##### **删除组件**

**功能描述:**

删除组件

**调用说明:**

DELETE /system/component/{id}

**参数说明:**

组件ID

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

### 1.2.16 系统信息-系统升级

#### 接口列表

| 序号 | API 定义                    | 接口功能         |
| ---- | --------------------------- | ---------------- |
| 1    | POST /system/upgrade        | 升级             |
| 2    | POST /system/upgrade/status | 获取当前升级状态 |
| 3    | GET /system/upgrade/{id}    | 获取升级详细信息 |
| 3    | GET /system/upgrade/history | 查询升级历史记录 |

#### 接口说明

##### **升级**

**功能描述:**

升级

**调用说明:**

POST /system/upgrade

**参数说明:**

| 参数        | 类型 | 说明   |
| ----------- | ---- | ------ |
| upgradeFile | File | 升级包 |

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

##### **获取当前升级状态**

**功能描述:**

获取当前升级状态

**调用说明:**

POST /system/upgrade/status

**参数说明:**

无

**返回值:**

| 参数   | 类型   | 说明     | 
| ------ | ------ | -------- |
| status | String | 升级状态 |

**示例****：**

**请求：**

**响应:**

Status:200

```json
{

"status": "BACKUP"

}
```

##### **获取升级详情信息**

**功能描述:**

获取指定升级内容详情

**调用说明:**

GET /system/upgrade/{id}

**参数说明:**

无

**返回值:**

| 参数        | 类型   | 说明     | 
| ----------- | ------ | -------- |
| version     | String | 升级版本 |
| upgradeTime | String | 升级时间 |
| description | String | 升级描述 |

**示例****：**

**请求：**

**响应:**

Status:200

```json
{

"version": "3.0.2.1.19978",

"upgradeTime": "2020-12-11 11:11:22",

"description ": "初始化U5安装，升级内容"

}
```

##### **分页查询升级历史记录**

**功能描述:**

查询升级历史记录

**调用说明:**

GET /system/upgrade/history

**参数说明:**

| 参数        | 类型    | 说明     |
| ----------- | ------- | -------- |
| page        | Integer | 页码     |
| size        | Integer | 页大小   |
| version     | String  | 版本     |
| description | String  | 升级描述 |

**返回值:**

| 参数         | 类型    | 说明     | 
| ------------ | ------- | -------- |
| id           | Integer | Id       |
| version      | String  | 版本     |
| upgradeTime  | String  | 升级时间 |
| description  | String  | 升级描述 |
| operatorId   | String  | 操作人ID |
| operatorName | String  | 操作人名 |
| status       | String  | 状态     |

**示例****：**

**请求：**

page=0&size=10&version=3

**响应:**

Status:200

```json
{

page: 0,

size: 10,

total: 1000,

data: [{

"id": 1,

"version": "6.0.9.420",

"upgradeTime": "2020-12-11 11:11:22",

"description": "初始化安装",

"upgradeUserId": 1,

"status": "SUCCESS",

"upgradeUserName": "admin"

}]

}
```

### 1.2.17 系统信息-License管理

#### 接口列表

| 序号 | API 定义            | 接口功能        |
| ---- | ------------------- | --------------- |
| 1    | GET /system/license | 获取license信息 |
| 2    | PUT /system/license | 导入license     |

#### 接口说明

##### **获取license信息**

**功能描述:**

获取license信息

**调用说明:**

GET /system/license

**参数说明:**

无

**返回值:**

| 参数        | 类型          | 说明                                                             |
| ----------- | ------------- | ---------------------------------------------------------------- |
| customName  | String        | 客户名称                                                         |
| version     | String        | 版本号（产品版本号）                                             |
| type        | String        | 授权类型（default默认授权，official正式授权，temporary临时授权） |
| deviceId    | String        | 产品ID                                                           |
| endTime     | String        | 授权到期时间                                                     |
| masterNum   | String        | 授权用户数量                                                     |
| resNum      | String        | 授权资源数量                                                     |
| authList    | List\<String> | 授权功能列表                                                     |
| allAuthList | List\<String> | 全部授权功能列表                                                 |

**示例****：**

**请求：**

**响应:**

Status:200
```json
{

"customName": "电信公司",

" version ": "3.0.3.4",

"type ": "official",

" deviceId ": "W3KPWXG2-TYWYQ7PW-V7C8QQT9-WWXWF6JT",

"endTime": "2021-3-9",

" masterNum ": "100",

"resNum ": "100",

" authList ": ["role","slave"],

    "allAuthList":["role","slave","bpm","auth"]

}
```

##### **导入license信息**

**功能描述:**

导入license

**调用说明:**

PUT /system/license

**参数说明:**

| 参数        | 类型 | 说明     | 
| ----------- | ---- | -------- |
| licenseFile | File | 授权文件 |

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

### 1.2.18 接口管理-日志外发

#### 接口列表

| 序号 | API 定义                 | 接口功能         |
| ---- | ------------------------ | ---------------- |
| 1    | GET /system/log-delivery | 获取日志外发配置 |
| 2    | PUT /system/log-delivery | 配置日志外发     |

#### 接口说明

##### **获取日志外发配置**

**功能描述:**

获取日志外发配置

**调用说明:**

GET /system/log-delivery

**参数说明:**

无

**返回值:**

| 参数     | 类型    | 说明     | 
| -------- | ------- | -------- |
| sendType | String  | 外发方式 |
| ip       | String  | FTP地址  |
| port     | Integer | FTP端口  |
| username | String  | 用户名   |
| password | String  | 密码     |
| path     | String  | 路径     |

**示例****：**

**请求：**

**响应:**

Status:200

```json
[

{

"sendType": "FTP",

"ip": "172.16.23.4",

"port": "22".

"username": "abc"

"password": "123456"

"path": "/"

}

]
```

##### **配置日志外发**

**功能描述:**

配置日志外发

**调用说明:**

PUT /system/log-delivery

**参数说明:**

| 参数     | 类型    | 说明     | 
| -------- | ------- | -------- |
| sendType | String  | 外发方式 |
| ip       | String  | FTP地址  |
| port     | Integer | FTP端口  |
| username | String  | 用户名   |
| password | String  | 密码     |
| path     | String  | 路径     |

**返回值:**

无

**示例****：**

**请求：**

```json
[

{

"sendType": "FTP",

"ip": "172.16.23.4",

"port": "22".

"username": "abc"

"password": "123456"

"path": "/"

}

]
```

**响应:**

Status:200

### 1.2.19 接口管理-短信配置

#### 接口列表

| 序号 | API 定义                    | 接口功能         |
| ---- | --------------------------- | ---------------- |
| 1    | GET /system/msg/gateway/sms | 获取短信网关配置 |
| 2    | PUT /system/msg/gateway/sms | 配置短信网关     |

#### 接口说明

##### **获取短信网关配置**

**功能描述:**

获取短信网关配置

**调用说明:**

GET /system/msg/gateway/sms

**参数说明:**

无

**返回值:**

无

**示例****：**

**请求：**

**响应:**

Status:200

```json
{

"username": "901783",

"password": "ICP001",

"sms_type": "cmpp3",

"sms_ip": "172.16.150.1",

"sms_port": "7890",

"sms_sp": "test",

"sms_send_number": "1008611",

"sms_smg_service": "10086",

"id": "1",

"configType": "sms",

"configContent": "123",

"status": "on"

}
```

##### **配置短信网关**

**功能描述:**

配置短信网关

**调用说明:**

PUT /system/msg/gateway/sms

**参数说明:**

**返回值:**

无

**示例****：**

**请求：**

```json
{

"username": "901783",

"password": "ICP001",

"sms_type": "cmpp3",

"sms_ip": "172.16.150.1",

"sms_port": "7890",

"sms_sp": "test",

"sms_send_number": "1008611",

"sms_smg_service": "10086",

"id": "1",

"configType": "sms",

"configContent": "123",

"status": "on"

}
```

**响应:**

Status:200

### 1.2.20 接口管理-邮件配置

#### 接口列表

| 序号 | API 定义                      | 接口功能           |
| ---- | ----------------------------- | ------------------ |
| 1    | GET /system/msg/gateway/email | 获取邮件服务器配置 |
| 2    | PUT /system/msg/gateway/email | 配置邮件服务器     |

#### 接口说明

##### **获取邮件服务器配置**

**功能描述:**

获取邮件服务器配置

**调用说明:**

GET /system/msg/gateway/email

**参数说明:**

无

**返回值:**

**示例****：**

**请求：**

**响应:**

Status:200

```json
{

"username": "admin",

"password": "123456",

"email_address": "11@1.com",

"email_host": "172.16.122.3",

"email_port": "22",

"id": "2",

"configType": "email",

"config_status": "on"

}
```

##### **配置邮件服务器**

**功能描述:**

配置邮件服务器

**调用说明:**

PUT /system/msg/gateway/email

**参数说明:**

无

**返回值:**

无

**示例****：**

**请求：**

```json
{

"username": "admin",

"password": "123456",

"email_address": "11@1.com",

"email_host": "172.16.122.3",

"email_port": "22",

"id": "2",

"configType": "email",

"config_status": "on"

}
```

**响应:**

Status:200

### 1.2.21 系统登录-统一登录界面

#### 接口列表

| 序号 | API 定义                              | 接口功能               |
| ---- | ------------------------------------- | ---------------------- |
| 1    | POST /system/login/reset/code/email   | 发送重置密码邮件验证码 |
| 2    | POST /system/login/reset/code/sms     | 发送重置密码短信验证码 |
| 3    | PUT /system/login/reset               | 重置密码               |
| 4    | POST /system/login/unclock/code/email | 发送解锁邮件验证码     |
| 5    | POST /system/login/unclock/code/sms   | 发送解锁短信验证码     |
| 6    | PUT /system/login/unlock              | 解锁                   |

#### 接口说明

##### **发送重置密码邮件验证码**

**功能描述:**

发送重置密码邮件验证码

**调用说明:**

POST /system/login/reset/code/email

**参数说明:**

**返回值:**

无

**示例****：**

**请求：**

```json
{

"username": "admin"

}
```

**响应:**

Status:200

##### **发送重置密码短信验证码**

**功能描述:**

发送重置密码短信验证码

**调用说明:**

POST /system/login/reset/code/sms

**参数说明:**

**返回值:**

无

**示例****：**

**请求：**

{

"username": "admin"

}

**响应:**

Status:200

##### **重置密码**

**功能描述:**

重置密码

**调用说明:**

PUT /system/login/reset

**参数说明:**

**返回值:**

无

**示例****：**

**请求：**

```json
{

"newPassword": "123456",

"verifyCode": "1234"

}
```

**响应:**

Status:200

##### **发送解锁邮件验证码**

**功能描述:**

发送解锁邮件验证码

**调用说明:**

POST /system/login/unclock/code/email

**参数说明:**

**返回值:**

无

**示例****：**

**请求：**

{

"username": "admin"

}

**响应:**

Status:200

##### **发送解锁短信验证码**

**功能描述:**

发送解锁短信验证码

**调用说明:**

POST /system/login/unclock/code/sms

**参数说明:**

**返回值:**

无

**示例****：**

**请求：**

```json
{

"username": "admin"

}
```

**响应:**

Status:200

##### **解锁**

**功能描述:**

解锁

**调用说明:**

PUT /system/login/unlock

**参数说明:**

**返回值:**

无

**示例****：**

**请求：**

```json
{

"newPassword": "123456",

"verifyCode": "1234"

}
```

**响应:**

Status:200

### 1.2.22 系统登录-登录

#### 接口列表

| 序号 | API 定义           | 接口功能 |
| ---- | ------------------ | -------- |
| 1    | POST /system/login | 登录     |

#### 接口说明

##### **登录**

**功能描述:**

登录

**调用说明:**

POST /system/login

**参数说明:**

**返回值:**

无

**示例****：**

**请求：**
```json
{

 "username":"admin",

"passowrd": "123456",

"verifyCode": "1234"

}
```

**响应:**

Status:200

### 1.2.23 系统登录-个人信息

#### 接口列表

| 序号 | API 定义                  | 接口功能           |
| ---- | ------------------------- | ------------------ |
| 1    | GET /system/user/info     | 当前登录的用户信息 |
| 2    | PUT /system/user/password | 修改密码           |

#### 接口说明

##### **当前登录用户信息**

**功能描述:**

当前登录的用户信息

**调用说明:**

GET /system/user/info

**参数说明:**

无

**返回值:**

**示例****：**

**请求：**

**响应:**

Status:200

```json
{

"id": "1",

"username": "zhangsan",

"phone": "13444444444"

}
```

##### **修改密码**

**功能描述:**

修改密码

**调用说明:**

PUT /system/user/password

**参数说明:**

**返回值:**

无

**示例****：**

**请求：**

```json
{

"oldpassword": "123456",

"newpassword": "1234567",

"repassword": "1234567"

}
```

**响应:**

Status:200

### 1.2.24 能力组件管理

### 1.2.25 系统日志管理-系统登录日志

#### 接口列表

| 序号 | API 定义              | 接口功能         |
| ---- | --------------------- | ---------------- |
| 1    | GET /system/log/login | 分页查询登录日志 |

#### 接口说明

##### **分页查询登录日志**

**功能描述:**

分页查询登录日志

**调用说明:**

GET /system/log/login

**参数说明:**

| 参数     | 类型    | 说明   | 
| -------- | ------- | ------ |
| page     | Integer | 页码   |
| size     | Integer | 页大小 |
| username | String  | 用户名 |
| ip       | String  | 登录IP |

**返回值:**

| 参数      | 类型   | 说明     | 
| --------- | ------ | -------- |
| Id        | String | 用户ID   |
| orgName   | String | 组织名   |
| username  | String | 用户名   |
| loginIp   | String | 登录IP   |
| loginTime | String | 登录时间 |

**示例****：**

**请求：**

page=0&size=10&username=3

**响应:**

Status:200

```json
{

page: 0,

size: 10,

total: 1000,

data: [{

"id": "49966",

" orgName ": "1",

" username ": "2",

" loginIp ": "21.1.1.1",

" loginTime ": "2020-12-11 11:11:22"

}]

}
```

### 1.2.26 系统日志管理-系统操作日志

#### 接口列表

| 序号 | API 定义                | 接口功能         |
| ---- | ----------------------- | ---------------- |
| 1    | GET /system/log/operate | 分页查询操作日志 |

#### 接口说明

##### **分页查询操作日志**

**功能描述:**

分页查询操作日志

**调用说明:**

GET /system/log/operate

**参数说明:**

| 参数     | 类型    | 说明   | 
| -------- | ------- | ------ |
| page     | Integer | 页码   |
| size     | Integer | 页大小 |
| username | String  | 用户名 |

**返回值:**

| 参数       | 类型   | 说明     | 
| ---------- | ------ | -------- |
| Id         | String | 用户ID   |
| orgName    | String | 组织名   |
| username   | String | 用户名   |
| content    | String | 操作内容 |
| moduleName | String | 模块名   |

**示例****：**

**请求：**

page=0&size=10&userName=3

**响应:**

Status:200

```json
{

page: 0,

size: 10,

total: 1000,

data: [{

"id": "49966",

" orgName ": "1",

" username ": "2",

" content ": "修改用户名",

" moduleName ": "用户管理"

}]

}
```
