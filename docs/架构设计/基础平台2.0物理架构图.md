---
created: 2023-09-22
number headings: first-level 2, start-at 1, max 6, 1.1-
title: 物理架构图
author: 罗潇
cssclass: wideTable
first-level: 1
pdf-filename: 基础平台2.0物理架构图
platform: true
category: 架构设计
---

# **物理架构**

基础平台通过支持单机(盒子)部署、分布式部署和云化部署。容器化部署适用于云环境，由客户方提供容器化部署的基础设施及中间件。

具体部署方式有产品自行决定，基础平台只负责支持以上三种部署方式。

## **单机部署**

![[../assets/img/Pasted image 20230925182014.png|Pasted image 20230925182014]]

单机部署直接在宿主服务器执行一键安装脚本即可完成安装。网关，用户服务、资源服务、系统服务、产品服务以及各种中间件，数据库都运行一个硬件服务器。单机部署资源要求底，部署简单，运维便捷。

单机部署情况下，服务直接运行在宿主机，不采用容器部署方式。虽然不能做好进程隔离，但是部署方便，只依赖Java虚拟机。

## **分布式部署**

![[../assets/img/Pasted image 20230925182025.png|Pasted image 20230925182025]]

分布式部署在各个宿主服务器执行所属服务的安装脚本。服务，中间件，数据库都可以运行在不同物理服务器。相较于单机部署， 资源要求高，部署复杂，运维难度大，但是能支持高性能，高并发的需求，而且组件间运行隔离，不相互影响。

分布式部署情况下，为充分利用资源，降低网络消耗，建议将静态网关和API网关部署在一台服务器上，数据库作为数据持久化节点，读写压力大，建议独占部署，这样对操作系统做针对于优化，比如关闭透明大页，关闭swap等。

## **容器化部署**

![[../assets/img/Pasted image 20230925182040.png|Pasted image 20230925182040]]

容器化部署是由用户提供部署云环境，产品服务不在提供安装脚本，而是通过一个个组件镜像发布。由于云环境运维由用户负责，系统服务不在提供网络配置，时间配置等涉及操作系统交互的功能，所以系统服务镜像不再依赖系统平台。
